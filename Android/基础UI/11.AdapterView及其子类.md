

### **AdapterView及其子类**

![AdapterView](appendix\AdapterView.png)

#### [**AdapterView**](https://developer.android.com/reference/android/widget/AdapterView.html)

代表一个使用适配器是视图，通过指定不同的适配器（Adapter）可以实现包含不同列表项的容器。一般都是使用其具体的实现类。

AdapterView抽象类提供了以下常量：

- int INVALID\_POSITION：代表一个无效的位置；
- longINVALID\_ROW\_ID：代表一个空的或无效的行Id；
- intITEM\_VIEW\_TYPE\_HEADER\_OR\_FOOTER：当条目类型为header或footer时，getItemViewType(int)方法返回的类型；
- intITEM\_VIEW\_TYPE\_IGNORE：当不想通过getItemViewType(int)方法返回某个条目类型时返回该类型。

还有以下类和接口：

-  public static class [AdapterView.AdapterContextMenuInfo](https://developer.android.com/reference/android/widget/AdapterView.AdapterContextMenuInfo.html)：该静态内部类实现了ContextMenu.ContextMenuInfo接口。当该AdapterView显示一个上下文菜单时会执行onCreateContextMenu(ContextMenu, View, ContextMenuInfo)回调方法，该类即用于为该方法提供额外的菜单信息。

   该类包含以下三个字段：

   - public longid：显示上下文菜单的列表项在列表中Id；
   - public intposition：显示上下文菜单的列表项在Adapter中的位置；
   - public ViewtargetView：显示上下文菜单的View。该View为AdapterView中的子视图。

    该类的构造器也是以这三个字段为参数的：AdapterView.AdapterContextMenuInfo (View targetView, int position, long id)。

-  public static interface AdapterView.OnItemClickListener：代表该AdapterView中条目被点击时的事件监听器。

 该监听器包含一个抽象方法：

-  abstract void onItemClick(AdapterView<?> parent, View view, int position, long id):

   -  parent：AdapterView，发生点击事件的AdapterView；
   -  view：View，AdapterView中被点击的View；
   -  position：int，被点击的View在Adapter中的位置；
   -  id：long，被点击条目在列表中的列Id。

                      如果需要访问被点击条目相关的数据，可以在该方法的实现中调用AdapterView.getItemAtPosition(position)
-  public static interface AdapterView.OnItemLongClickListener：代表该AdapterView中条目被长按时的事件监听器。

 该监听器包含一个抽象方法：

-  abstract boolean	onItemLongClick(AdapterView&lt;?> parent, View view, int position, long id):

   - parent：AdapterView，发生长按事件的AbsListView；
   - view：View，AdapterView中被长按的View；
   - position：int，被长按的View在Adapter中的位置；
   - id：long，被长按条目在列表中的列Id。

   如果需要访问被长按条目相关的数据，可以在该方法的实现中调用AdapterView.getItemAtPosition(position)
-  public static interface AdapterView.OnItemSelectedListener：代表该AdapterView中条目被选中时的事件监听器。

 该监听器包含两个抽象方法：

-  abstract boolean	onItemLongSelected(AdapterView&lt;?> parent, View view, int position, long id):

   - parent：AdapterView，发生选择事件的AbsListView；
   - view：View，AdapterView中被选中的View；
   - position：int，被选中的View在Adapter中的位置；
   - id：long，被选中条目在列表中的列Id。

   如果需要访问被长按条目相关的数据，可以在该方法的实现中调用AdapterView.getItemAtPosition(position)
-  abstract void onNothingSelected(AdapterView&lt;?> parent)：

   - parent：AdapterView，现在不含被选中条目的AdapterView。

   选中条目在AdapterView中消失时回调该方法。

AdapterView还提供了一些操作列表项的方法：

- abstract T getAdapter()：返回与该AdapterView关联的Adapter；
- int getCount()：返回数据条目的数量，可能比可见列表项要多；
- View getEmptyView()：当当前Adapter为空时，该AdapterView可以显示一个叫做空View的特殊View；
- int getFirstVisiblePosition():返回Adapter数据集中第一个显示在屏幕上的条目在该Adapter中的位置；
- Object getItemAtPosition(int position)：返回列表中指定位置的数据；
- long getItemIdAtPosition(int position)：返回列表中指定位置数据项的Id；
- int getLastVisiblePosition()：返回显示在屏幕上最后一个列表项在Adapter数据集中的位置；
- final AdapterView.OnItemClickListenergetOnItemClickListener()：返回该AdapterView上的点击事件的监听器；
- final AdapterView.OnItemLongClickListenergetOnItemLongClickListener()：返回该AdapterView上的长按事件的监听器；
- final AdapterView.OnItemSelectedListenergetOnItemSelectedListener()：返回该AdapterView上的选中事件的监听器；
- int getPositionForView(View view)：返回该View在Adapter的数据集中的位置，该View可能是一个Adapter条目，或者一个Adapter条目的子条目；
- Object getSelectedItem()：获取当前被选中条目相关的数据；
- long getSelectedItemId()：获取当前被选中条目的Id；
- int getSelectedItemPosition()：返回当前选中条目在Adapter中的位置;
- abstract ViewgetSelectedView()：返回当前被选中条目的View；
- boolean performItemClick(View view, int position, long id)：如果定义了OnItemClickListener，就调用它；
- abstract voidsetAdapter(T adapter)：为该AdapterView设置Adapter；
- void setEmptyView(View emptyView)：设置Adapter为空时显示的View；
- void setFocusable(boolean focusable)：设置该View是否可以获得焦点;
- void setFocusableInTouchMode(boolean focusable)：设置该View是否可以在触控模式下获得焦点；
- void setOnClickListener(View.OnClickListener l)：为该AdapterView设置一个点击事件监听器；
- void setOnItemClickListener(AdapterView.OnItemClickListener listener)：为该AdapterView的条目注册一个单击事件监听器；
- void setOnItemLongClickListener(AdapterView.OnItemLongClickListener listener)：为该AdapterView的条目注册一个长按事件监听器；
- void setOnItemSelectedListener(AdapterView.OnItemSelectedListener listener)：为该AdapterView的条目注册一个选择事件监听器；
- abstract voidsetSelection(int position)：设置当前选中的条目。

可以通过以上方法可以实时与AdapterView的数据项交互。

#### [**AbsListView**](https://developer.android.com/reference/android/widget/AbsListView.html)

该抽象类对象代表一个虚拟的列表。
AbsListView抽象类含有以下常量：

- int CHOICE\_MODE\_MULTIPLE：列表允许多选；
- int CHOICE\_MODE\_MULTIPLE\_MODAL：列表允许在模态选择模式下多选；
- int CHOICE\_MODE\_NONE：不允许选择的普通列表；
- int CHOICE\_MODE\_SINGLE：列表允许单选；
- int TRANSCRIPT\_MODE\_ALWAYS\_SCROLL：列表自动滚动到底部的transcript模式。不管什么列表项当前是可见的；
- int TRANSCRIPT\_MODE\_DISABLED：禁用transcript模式；
- int TRANSCRIPT\_MODE\_NORMAL：当数据集改变时列表自动滚动到底部的transcript模式，除非最后一个列表项已经可见了。

该类提供了以下静态内部类和内部接口：

- public static class AbsListView.LayoutParams：该类继承自ViewGroup.LayoutParams，用来控制列表项的布局属性（width、height、gravity等）；
- public static interface AbsListView.MultiChoiceModeListener implements ActionMode.Callback：代表一个接收CHOICE\_MODE\_MULTIPLE\_MODAL事件的多选模式监听器。它在选择模式下作用同[ActionMode.Callback](https://developer.android.com/reference/android/view/ActionMode.Callback.html)。

 该接口含有一个抽象方法：

-  abstract void	onItemCheckedStateChanged(ActionMode mode, int position, long id, boolean checked)：

   -  mode：ActionMode，提供选择模式的ActionMode对象；
   -  position：int，选中或未选中条目在Adapter中的位置；
   -  id：long，选中或未选中条目在Adapter中的ID；
   -  checked：boolean，条目的选中状态。

   当条目选中状态发生变化时回调该方法。

-  public static interface AbsListView.OnScrollListener：代表一个监听列表视图或网格视图滚动的监听器。

 该接口包含以下常量：

- int SCROLL\_STATE\_FLING：代表用户执行了touch（接触屏幕），并完成了fling动作（短暂滑动后手指离开屏幕，而不是手指与屏幕接触时滑动，这个动作一般会导致列表项快速滚动），滚动动画将要停止；
- int SCROLL\_STATE\_IDLE：代表View没有滚动。既然没有过渡动画，就像处于闲置状态一样使用轨迹球计数来导航列表；
- int SCROLL\_STATE\_TOUCH\_SCROLL：代表用户手指保持与屏幕接触的滑动动作；

 该接口还包含以下方法：

-  abstract void onScroll (AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount)：

   - view：AbsListView，代表滚动状态已改变的AbsListView；
   - firstVisibleItem：int，第一个可见条目的索引(不管visibleItemCount == 0)；
   - visibleItemCount：int，可见条目的数量；
   - totalItemCount：int，Adapter中的条目的数量。

   滚动完成后触发该方法。

-  abstract void onScrollStateChanged (AbsListView view, int scrollState)：

   - view：AbsListView，代表滚动状态改变的AbsListView；
   - scrollState：int，当前的滚动状态，为SCROLL\_STATE\_TOUCH\_SCROLL或SCROLL\_STATE\_IDLE。

   列表滚动时触发该方法。该方法会在下一条目显示之前回调，即在任何调用getView(int, View, ViewGroup)方法之前回调。

-  public static interface AbsListView.RecyclerListener：代表一个RecyclerListener，每当View被放进AbsListView.RecycleBin报废堆里时发出通知，该监听器用来接收该通知来释放AbsListView.RecycleBin中View关联的资源。

 该接口包含以下方法：

- abstract void onMovedToScrapHeap(View view)：view参数表示放进回收器报废堆里的View，该View不再显示，且该View关联的昂贵资源也应丢弃。

- public static interface AbsListView.SelectionBoundsAdjuster：列表项的顶层View可以实现该接口来修改显示该列表项时的选择边界。

 该接口包含以下方法：

- abstract void adjustListItemSelectionBounds(Rect bounds)：调用该方法可以调整列表项的选择边界。bounds参数包含了列表为该列表项选择的边界，可以在方法中修改该值。

常见方法如下：

- void addTouchables(ArrayList&lt;View> views)：添加可触摸的Views（当前View的子View，如果当前View也可触摸，则包含当前View）；
- boolean canScrollList(int direction)：检查列表是否可以朝某个方向滚动；
- void clearChoices()：清空当前条目的选择；
- void clearTextFilter()：清空文本筛选器；
- void deferNotifyDataSetChanged()：如果一个RemoteViewsAdapter还未连接，则为它延迟notifyDataSetChanged；
- void draw(Canvas canvas)：手动绘制该View（包括该View的所有子View）到指定的Canvas；
- void fling(int velocityY):向一个方向fling；
- AbsListView.LayoutParams generateLayoutParams(AttributeSet attrs)：返回基于给定的AttributeSet布局参数；
- int getCacheColorHint():设置为非零值时，cache color hint表明该列表绘制在一个单色不透明的实体背景上；
- int getCheckedItemCount()：返回当前选中的条目数；
- long[] getCheckedItemIds()：返回选中条目ID的集合；
- int getCheckedItemPosition()：返回当前选中条目的位置。刚方法仅在CHOICE\_MODE\_SINGLE模式下有效，如果无选中项则返回INVALID\_POSITION；
- SparseBooleanArray getCheckedItemPositions()：返回列表中选中条目的集合；
- int getChoiceMode()：返回当前选择模式类型；
- View getSelectedView()：返回当前选中条目相关的View；
- Drawabl egetSelector()：返回列表中selector Drawable对象；
- CharSequence getTextFilter()：返回文本筛选器；
- int getTranscriptMode()：返回当前transcript模式;
- int getVerticalScrollbarWidth()：返回垂直滚动条的宽度；
- boolean hasTextFilter()：判断ListView是否有文本筛选器；
- void invalidateViews()：让所有View重建和重绘；
- boolean isFastScrollAlwaysVisible()：判断快速滚动条是否可见；
- boolean isFastScrollEnabled()：判断快速滚动条是否可用；
- boolean isItemChecked(int position)：判断指定条目是否可选；
- boolean isScrollingCacheEnabled()：判断是否滚动时是否使用子View的绘制缓存；
- boolean isSmoothScrollbarEnabled()：返回当前快速滚动特性的状态。如果快速滚动条可用则返回true；
- boolean isStackFromBottom()：如果该View被固定到货堆到底部，就返回true。否则返回false；
- boolean onKeyDown(int keyCode, KeyEvent event)：KeyEvent.Callback.onKeyDown()的默认实现。如果一个View可用且可点击，则在按下该View发出KEYCODE\_DPAD\_CENTER或KEYCODE\_ENTER；
- boolean onKeyUp(int keyCode, KeyEvent event)：KeyEvent.Callback.onKeyUp()的默认实现。点击一个View后发出KEYCODE\_DPAD\_CENTER、 KEYCODE\_ENTER或KEYCODE\_SPACE；
- boolean onNestedFling(View target, float velocityX, float velocityY, boolean consumed)请求内部滚动中的一个fling；
- void onNestedScroll(View target, int dxConsumed, int dyConsumed, int dxUnconsumed, int dyUnconsumed)：响应内部滚动;
- boolean performItemClick(View view, int position, long id)：如果定义了OnItemClickListener，则执行它；
- int pointToPosition(int x, int y)：映射指定点到一个条目，返回包含指定点的条目的位置。如果指定点不在条目内则返回INVALID\_POSITION；
- long pointToRowId(int x, int y)：映射指定点到一个条目，返回含有该店的条目的行Id。如果指定点不在条目内则返回INVALID\_POSITION；
- void reclaimViews(List&lt;View> views)：将该AbsListView持有的所有View（包括headers和footers，也包含在回收器中的所有View）移到给定的List中；
- void scrollListBy(int y)：滚动指定的像素距离；
- void setChoiceMode(int choiceMode)：设置选择模式；
- void setDrawSelectorOnTop(boolean onTop)：控制选择高亮的drawable应绘制在条目的上方还是下方；
- void setFastScrollAlwaysVisible(boolean alwaysShow)：设置快速滚动是否一直可见；
- void setFastScrollEnabled(boolean enabled)：设置快速滚动是否可用；
- void setFastScrollStyle(int styleResId)：设置快速滚动样式；
- void setFilterText(String filterText)：设置文本筛选器；
- void setFriction(float friction)：设置fling的灵敏度；
- void setItemChecked(int position, boolean value)：设置某个位置的条目是否选中；
- void setMultiChoiceModeListener(AbsListView.MultiChoiceModeListener listener)：设置多选模式的监听器；
- void setOnScrollListener(AbsListView.OnScrollListener l)：设置滚动监听器；
- void setOverScrollMode(int mode):为该View设置越界滚动模式。可以设置为OVER\_SCROLL\_ALWAYS(默认)，OVER\_SCROLL\_IF\_CONTENT\_SCROLLS(仅在View内容比其容器大时允许越界滚动)，或OVER\_SCROLL\_NEVER（不允许越界滚动）；
- void setRecyclerListener(AbsListView.RecyclerListener listener)：设置RecyclerListener；
- void setRemoteViewsAdapter(Intent intent)：设置该AbsListView使用一个通过指定Intent连接到RemoteViewsServiece远程的Adapter；
- void setScrollBarStyle(int style)：设置滚动条的样式；
- void setScrollIndicators(View up, View down)：设置滚动指示器；
- void setScrollingCacheEnabled(boolean enabled)：设置是否滚动时开启子View的绘制缓存；
- void setSelectionFromTop(int position, int y)：设置该ListView的选中条目和该条目到ListView顶部的距离；
- void setSelector(int resID)：设置高亮显示当前选中条目所用的Drawable的Id；
- void setSelector(Drawable sel)：设置高亮显示当前选中条目所用的Drawable的Id；
- void setSmoothScrollbarEnabled(boolean enabled)：设置平滑滚动条是否可用；
- void setStackFromBottom(boolean stackFromBottom)：设置是否从底部开始堆放View；
- void setTextFilterEnabled(boolean textFilterEnabled)：设置文本筛选器是否可用；
- void setTranscriptMode(int mode)：设置Transcript模式；
- void setVelocityScale(float scale)：设置fling速度的比例因子（scale参数用于乘以速度）。初始值为1.0；
- void setVerticalScrollbarPosition(int position)：设置垂直滚动条的位置；
- boolean showContextMenu(float x, float y)：为该View显示上下文菜单。x、y参数为上下文菜单显示在该View上的相对位置；
- boolean showContextMenu()：同上，只是没有指定上下文菜单的位置；
- booleans howContextMenuForChild(View originalView, float x, float y)：为指定View或其父组件显示上下文菜单，x、y参数指定上下文菜单相对位置；
- boolean showContextMenuForChild(View originalView)：同上，只是没有指定上下文菜单的位置；
- void smoothScrollBy(int distance, int duration)：设置平滑滚动的距离和持续的毫秒数；
- void smoothScrollToPosition(int position)：设置平滑滚动到Adapter中指定的位置；
- void smoothScrollToPosition(int position, int boundPosition)：同上，只是会在boundPosition位置将要越出时停住；
- void smoothScrollToPositionFromTop(int position, int offset, int duration)：在指定的时间段内平滑滚动到指定的Adapter中position位置，指定位置的View会显示在距离顶部offset个像素的偏移的地方；
- void smoothScrollToPositionFromTop(int position, int offset)：同上，只是没有指定滚动的时间。

常用XML属性如下：

| XML属性                                    | 对应方法                                     | 描述                                       |
| ---------------------------------------- | ---------------------------------------- | ---------------------------------------- |
| [`android:cacheColorHint`](https://developer.android.com/reference/android/widget/AbsListView.html#attr_android:cacheColorHint) |                                          | 表明该列表将会一直绘制在指定的单色背景之上，这可以优化列表的绘制         |
| [`android:choiceMode`](https://developer.android.com/reference/android/widget/AbsListView.html#attr_android:choiceMode) |                                          | 设置该列表的选择行为，可以为<br>none（不支持包含选中项）<br>singleChioce（最多可以选中一个）<br>multipleChioce（允许多选）<br>multipleChoiceModal（允许自定的多选）<br>可以通过相应的监听器来监听选择的变化 |
| [`android:drawSelectorOnTop`](https://developer.android.com/reference/android/widget/AbsListView.html#attr_android:drawSelectorOnTop) | [setDrawSelectorOnTop(boolean)](https://developer.android.com/reference/android/widget/AbsListView.html#setDrawSelectorOnTop(boolean)) | 设置为true时，选择器将绘制在被选中列表项的上面                |
| [`android:fastScrollEnabled`](https://developer.android.com/reference/android/widget/AbsListView.html#attr_android:fastScrollEnabled) |                                          | 设置是否开启快速滚动，手指移动一小段距离就可以快速滚过许多列表项         |
| [`android:listSelector`](https://developer.android.com/reference/android/widget/AbsListView.html#attr_android:listSelector) | [setSelector(int)](https://developer.android.com/reference/android/widget/AbsListView.html#setSelector(int)) | 使用指定的Drawable对象来标识该列表中被选中列表项             |
| [`android:scrollingCache`](https://developer.android.com/reference/android/widget/AbsListView.html#attr_android:scrollingCache) |                                          | 设置该列表在滚动时是否使用缓存。 若设为true，则将使滚动表现更快速，但会占用更内存，默认为true |
| [`android:smoothScrollbar`](https://developer.android.com/reference/android/widget/AbsListView.html#attr_android:smoothScrollbar) | setSmoothScrollbarEnabled(boolean)       | 设置该列表是否使用基于可见列表项像素高度的精确计算。该属性默认为true，但是如果你的适配器将可变高度的列表项就应该将该属性设置为false。设置为true会导致滚动条随列表高度的变化而改变大小，设置为false，列表会根据适配器中的列表项数和可见的列表项数来决定滚动条的属性 |
| [`android:stackFromBottom`](https://developer.android.com/reference/android/widget/AbsListView.html#attr_android:stackFromBottom) |                                          | 设置ListView和GridView是否从底部排列列表项            |
| [`android:textFilterEnabled`](https://developer.android.com/reference/android/widget/AbsListView.html#attr_android:textFilterEnabled) |                                          | 设置是否对列表项进行过滤，这要求适配器必须实现Filterable接口。     |
| [`android:transcriptMode`](https://developer.android.com/reference/android/widget/AbsListView.html#attr_android:transcriptMode) |                                          | 设置该组件的滚动模式：<br>disable（关闭滚动，此为默认值）<br>normal（当接收到数据改变的通知，并且最后的列表现已经可见时，该列表将自动滚动到底部）<br>always（列表总是自动滚动到屏幕底部） |

#### [**ListView**](https://developer.android.com/reference/android/widget/ListView.html)

该类代表一个垂直滚动列表，使用Adapter（适配器）接口对象自动将列表项插入列表，适配器从来源（例如数组或数据库查询）提取内容，并将每个项目结果转换为视图放置到列表中。

ListView提供了以下常用public方法：

- void addFooterView(View v, Object data, boolean isSelectable)：在该ListView底部添加一个固定的View。多次调用该方法后，添加的这些View将依次显示在底部。data参数指定与被添加View相关联的数据，isSelectable指定该被添加的View是否是可选的；
- void addFooterView(View v)：同上；
- void addHeaderView(View v, Object data, boolean isSelectable)：在该ListView顶部添加固定的View；
- void addHeaderView(View v)：同上；
- boolean areFooterDividersEnabled()：判断FooterView之前的分隔条是否可用；
- boolean areHeaderDividersEnabled()：设置HeaderView之后的分隔条是否可用；
- boolean dispatchKeyEvent(KeyEvent event)：将一个按键事件分发给焦点路径上的下一个View；
- ListAdapter getAdapter()：获取该ListView相关联的Adapter；
- Drawable getDivider()：返回条目之间分隔条所用的Drawable对象；
- int getDividerHeight()：获取分隔条的高度；
- int getFooterViewsCount():获取FooterView的数量；
- int getHeaderViewsCount()：获取HeaderView的数量；
- boolean getItemsCanFocus()：判断ListAdapter创建的View是否可获得焦点；
- int getMaxScrollAmount()：获取最大的滚动量；
- Drawable getOverscrollFooter()：获取显示在列表所有内容之后的Drawable；
- Drawable getOverscrollHeader()：获取显示在列表所有内容之前的Drawable；
- boolean isOpaque()：判断该View是否是不透明的；
- void onInitializeAccessibilityNodeInfoForItem(View view, int position, AccessibilityNodeInfo info)：使用与列表中特定条目相关的信息来初始化一个AccessibilityNodeInfo；
- boolean removeFooterView(View v)：移除前一个footer View；
- boolean removeHeaderView(View v)：移除前一个header View；
- boolean requestChildRectangleOnScreen(View child, Rect rect, boolean immediate)：当该视图中的一个子View想要定位在屏幕上的矩形（该矩形为该View内容的坐标）；
- void setCacheColorHint(int color)：设置为非零值时，cache color hint表明该列表总是绘制在单色不透明的实体背景上；
- void setDivider(Drawable divider)：设置列表项之间的分隔条所用的Drawable对象；
- void setFooterDividersEnabled(boolean footerDividersEnabled)：设置footer views是否使用分隔条；
- void setHeaderDividersEnabled(boolean headerDividersEnabled)：设置header views是否使用分隔条；
- void setItemsCanFocus(boolean itemsCanFocus)：设置是否可以包含能获得焦点的列表项；
- void setOverscrollFooter(Drawable footer)：设置所有列表内容下面绘制的Drawable对象；
- void setOverscrollHeader(Drawable header)：设置所有列表内容上面绘制的Drawable对象；
- void setRemoteViewsAdapter(Intent intent)：为该ListView设置一个连接RemoteViewsService的远程Adapter；
- void setSelection(int position)：设置当前选中的列表项；
- void setSelectionAfterHeaderView()：设置header views下方第一个选中的列表项；
- void smoothScrollByOffset(int offset)：平滑滚动到指定的Adapter中指定的偏移位置；
- void smoothScrollToPosition(int position)：平滑滚动到Adapter中指定的位置。

常见XML属性及方法：

| XML属性                                    | 对应方法                               | 描述                                   |
| ---------------------------------------- | ---------------------------------- | ------------------------------------ |
| [`android:divider`](https://developer.android.com/reference/android/widget/ListView.html#attr_android:divider) | setDivider(Drawable)               | 设置列表项之间的间隔条所用的Drawable和颜色            |
| [`android:dividerHeight`](https://developer.android.com/reference/android/widget/ListView.html#attr_android:dividerHeight) | setDividerHeight(int)              | 设置列表项之间的间隔条的高度                       |
| [`android:entries`](https://developer.android.com/reference/android/widget/ListView.html#attr_android:entries) |                                    | 指向一个数组资源，ListView将根据该数组元素内容来生成列表项    |
| [`android:footerDividersEnabled`](https://developer.android.com/reference/android/widget/ListView.html#attr_android:footerDividersEnabled) | setFooterDividersEnabled(boolean ) | 如果设置为false，将不会在每个页脚视图之前绘制间隔条，默认为true |
| [`android:headerDividersEnabled`](https://developer.android.com/reference/android/widget/ListView.html#attr_android:headerDividersEnabled) | setHeaderDividersEnabled(boolean)  | 如果设置为false，将不会在每个页眉视图之后绘制间隔条，默认为true |

#### [**GridView**](https://developer.android.com/reference/android/widget/GridView.html)

GridView代表一个二维网格视图，该视图可显示条目的、可滚动的。网格中的条目来自一个与该网格视图相关的ListAdapter。

常用XML属性及相应方法
| XML属性                     | 对应方法                      | 描述                                       |
| ------------------------- | ------------------------- | ---------------------------------------- |
| android:columnWidth       | setColumnWidth(int)       | 设置列的宽度                                   |
| android:gravity           | setGravity(int)           | 设置每个单元格的对齐方式                             |
| android:horizontalSpacing | setHorizontalSpacing(int) | 设置列之间的默认水平间距                             |
| android:verticalSpacing   | setVerticalSpacing(int)   | 设置行之间的默认垂直间距                             |
| android:numColumns        | setNumColumns(int)        | 设置有多少列                                   |
| android:stretchMode       | setStretchMode(int)       | 设置拉伸模式：<br>none（不拉伸）<br>spacingWidth（拉伸列之间的间距）<br>columnWidth（拉伸列本身）<br>spacingWidthUniform（一致性地拉伸列间距和列宽度） |

常用方法如下：

- int getColumnWidth()：获取列的宽度；
- int getGravity()：获取单元格的对齐方式；
- int getHorizontalSpacing()：返回水平间距宽度；
- int getNumColumns()：获取网格列的数量；
- int getRequestedColumnWidth()：获取请求的列宽度的像素值。可能不是实际的列宽度，getColumnWidth()返回的是实际列宽度；
- int getRequestedHorizontalSpacing()：获取请求的水平间距。该方法的返回值可能作为填充阶段默认网格样式的一部分，或者调用 setHorizontalSpacing(int)时参数值。如果布局尚未完成或GridView计算出了一个与请求间距不同的间距值，那么该方法就可能与getHorizontalSpacing()方法的返回值不同；
- int getStretchMode()：获取拉伸模式；
- int getVerticalSpacing()：获取垂直间距；
- void setRemoteViewsAdapter(Intent intent)：通过指定的Intent为该网格视图设置一个连接到RemoteViewsService的远程Adapter；
- void setSelection(int position)：设置当前选中条目。

实例：

```xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal">

    <GridView
        android:id="@+id/grid_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerInParent="true"
        android:layout_marginTop="10dp"
        android:gravity="center"
        android:horizontalSpacing="1pt"
        android:numColumns="4"
        android:verticalSpacing="1pt" />

    <ImageView
        android:id="@+id/preview_image_view"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentBottom="true"
        android:layout_centerInParent="true"
        android:layout_marginBottom="20dp"
        android:layout_marginTop="10dp"
        android:background="@color/colorPrimaryDark" />
</RelativeLayout>
```

```java
public class GridViewTest extends AppCompatActivity {

    private String[] summoner_names = new String[]{
            "Alistar", "Annie", "Ashe", "Blitzcrank",
            "Brand", "Garen", "Jax", "Kayle",
            "Malphite", "Maokai", "Miss Fortune", "Morganna",
            "Rammus", "Sion", "Sivir", "Swain"};
    private int[] Icons = new int[]{
            R.drawable.alistar, R.drawable.annie, R.drawable.ashe, R.drawable.blitzcrank,
            R.drawable.brand, R.drawable.garen, R.drawable.jax, R.drawable.kayle,
            R.drawable.malphite, R.drawable.maokai, R.drawable.miss_fortune, R.drawable.morganna,
            R.drawable.rammus, R.drawable.sion, R.drawable.sivir, R.drawable.swain};


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_grid_view_test);
        GridView gridView = (GridView) findViewById(R.id.grid_view);
        final ImageView previewView = (ImageView) findViewById(R.id.preview_image_view);

        List<Map<String, Object>> items = new ArrayList<>();
        for (int i = 0; i < summoner_names.length; i++) {
            Map<String, Object> item = new HashMap<>();
            item.put("header", Icons[i]);
            item.put("name", summoner_names[i]);
            items.add(item);
        }
        SimpleAdapter simpleAdapter = new SimpleAdapter(this, items, R.layout.grid_view_cell,
                new String[]{"header", "name"}, new int[]{R.id.grid_item_view, R.id.summoner_name_text});
        gridView.setAdapter(simpleAdapter);

        gridView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                previewView.setImageResource(Icons[position]);
            }
        });
    }
}
```

显示效果如下图所示：

![GridView](C:\Users\Vincent Huang\Desktop\studynotes\Android\基础UI组件\appendix\GridView.png)

#### [**ExpandableListView**](https://developer.android.com/reference/android/widget/ExpandableListView.html)

ExpandableListView继承自ListView，代表一个可扩展列表视图，即是一个垂直的两级列表。第一级是列表项的分组，第二级为具体某组的列表项。
ExpandableListView的列表项由ExpandableListAdapter提供。

![ExpandableListViewAdapter.png](appendix\ExpandableListViewAdapter.png)

实现ExpandableListAdapter一般有三种方式：

- 扩展BaseExpandableListAdapter实现ExpandableListAdapter；
- 使用SimpleExpandableListAdapter将两个List集合包装成ExpandableListAdapter；
- 使用SimpleCursorTreeAdapter将Cursor中的数据包装成ExpandableListAdapter。

扩展BaseExpandableListAdapter主要实现以下方法：

- int getGroupCount()：返回列表项组的数量；
- public Object getGroup(int groupPosition)：返回特定列表项组中的数据；
- public long getGroupId(int groupPosition)：返回特定列表项组的行Id；
- View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent)：返回显示特定列表项组所用的View；
- int getChildrenCount(int groupPosition)：返回特定列表项组所包含的子列表项的数量；
- public Object getChild(int groupPosition, int childPosition)：返回特定列表项中的数据；
- public long getChildId(int groupPosition, int childPosition)：返回列表项的行Id；
- View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent)：返回显示特定列表项组中特定子列表项所用的View。
- public boolean hasStableIds()：表明列表项和列表项组的Id在底层数据改变时是否为stable的；
- public boolean isChildSelectable(int groupPosition, int childPosition)：判断特定位置的列表项是否是可选的。

可扩展列表可以在每个列表项旁边显示一个指示器来表示列表项当前的状态（通常为展开的组、折叠的组、子列表项或最后一个子列表项）。使用 setChildIndicator(Drawable)或setGroupIndicator(Drawable)（或相关的XML属性）来设置这些指示器。系统布局文件android.R.layout.simple\_expandable\_list\_item\_1和android.R.layout.simple\_expandable\_list\_item\_2（应该和SimpleCursorTreeAdapter一起使用）包含指示器的首选项信息。

ExpandableListView的上下文菜单信息是一个[ExpandableListView.ExpandableListContextMenuInfo](https://developer.android.com/reference/android/widget/ExpandableListView.ExpandableListContextMenuInfo.html)对象，该对象可以用来设置可扩展列表的上下文菜单信息。

>注意：如果ExpandableListView的父ViewGroup的尺寸没有严格指定，则ExpandableListView就不能在XML文件中指定android:layout_height属性为wrap_content（例如，父ViewGroup为ScrollView，就不能指定wrap_content，因为它可以是任意大小。当然，如果父ViewGroup指定了固定大小，就可以为ExpandableListView的尺寸指定wrap_content）。

ExpandableListView包含以下静态内部类和接口：

- public static class	ExpandableListView.ExpandableListContextMenuInfo。该静态内部类代表额外的菜单信息。这些信息在ExpandableListView上显示上下文菜单时提供给onCreateContextMenu(ContextMenu, View, ContextMenuInfo)回调方法。

 该类包含以下字段：

- public long id：显示上下文菜单的列表项（或列表项组）的ID；
- public long packedPosition：列表中打包的Adapter中的位置，该位置处显示上下文菜单；
   - public View targetView：显示上下文菜单的View；

  该类的构造器也是以这三个字段为参数的。

- public static interface ExpandableListView.OnChildClickListener。代表该可扩展列表中的一个列表项的单击事件监听器。

 该接口包含一个抽象方法：

- abstract boolean	onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id)：

   - parent：ExpandableListView，发生单击事件的ExpandableListView；
   - v：View，被单击的列表项；
   - groupPosition：int，被点击列表项所在的列表项组位置；
   - childPosition：int，被单击列表项在列表项组中的位置；
   - id：long，被单击列表项的行ID。

- public static interface ExpandableListView.OnGroupClickListener。代表该可扩展列表中的一个列表组的单击事件监听器。

 该类包含以下方法：

- abstract boolean	onGroupClick(ExpandableListView parent, View v, int groupPosition, long id)：

   - parent：ExpandableListView，发生单击事件的ExpandableListView；
   - v：View，被单击的列表项组；
   - groupPosition：int，被点击列表项所在的列表项组位置；
   - id：long，被单击列表项的行ID。

- public static interface ExpandableListView.OnGroupCollapseListener。代表该可扩展列表中的一个列表项组折叠事件的监听器。

 该接口包含一个抽象方法：

- abstract void onGroupCollapse(int groupPosition)：

   - groupPosition：int，被折叠起来的列表项组的位置。

- public static interface ExpandableListView.OnGroupExpandListener。代表该可扩展列表中的一个列表项组展开事件的监听器。

 该接口包含一个抽象方法：

- abstract void onGroupExpand(int groupPosition)：

   - groupPosition：int，被展开的列表项组的位置。

常用XML属性：
| XML属性                       | 描述                          |
| --------------------------- | --------------------------- |
| android:childDivider        | 列表项之间的分隔条所有的Drawable资源      |
| android:childIndicator      | 列表项的指示器，可以是一个状态列表的Drawable  |
| android:childIndicatorEnd   | 必须是一个带单位的尺寸值，列表项指示器的结尾处边界   |
| android:childIndicatorLeft  | 必须是一个带单位的尺寸值，列表项指示器的左侧边界    |
| android:childIndicatorRight | 必须是一个带单位的尺寸值，列表项指示器的右侧边界    |
| android:childIndicatorStart | 必须是一个带单位的尺寸值，列表项指示器的开始处边界   |
| android:groupIndicator      | 列表项组的指示器，可以是一个状态列表的Drawable |
| android:indicatorEnd        | 必须是一个带单位的尺寸值，列表项组指示器的结尾处边界  |
| android:indicatorLeft       | 必须是一个带单位的尺寸值，列表项组指示器的左侧边界   |
| android:indicatorRight      | 必须是一个带单位的尺寸值，列表项组指示器的右侧边界   |
| android:indicatorStart      | 必须是一个带单位的尺寸值，列表项组指示器的开始处边界  |

常用方法如下：

- boolean collapseGroup(int groupPos)：将指定位置的列表项组折叠起来。成功折叠就返回true，如果已经折叠了就返回false；
- boolean expandGroup(int groupPos)：将指定位置的列表项组展开。成功展开就返回true，如果已经展开就返回false；
- boolean expandGroup(int groupPos, boolean animate):将指定位置的列表项组展开，并在展开时显示动画；
- ExpandableListAdapter getExpandableListAdapter()：获取相关的ExpandableListAdapter；
- long getExpandableListPosition(int flatListPosition)：将列表项（或列表项组）指定的原始位置转换为列表项（或列表项组）的打包位置。使用getPackedPositionType(long)，getPackedPositionChild(long)，getPackedPositionGroup(long)来反打包位置；
- int getFlatListPosition(long packedPosition)：同上面的方法相反；
- static int getPackedPositionChild(long packedPosition)：返回列表项的打包位置。打包位置为PACKED\_POSITION\_TYPE\_CHILD类型(使用getPackedPositionType(long)方法可获得)；
- static long getPackedPositionForChild(int groupPosition, int childPosition)：返回指定列表组中指定列表项的打包位置；
- static long getPackedPositionForGroup(int groupPosition)：返回指定位置的列表项组的打包位置；
- static int getPackedPositionGroup(long packedPosition)：返回指定打包位置的的原始位置；
- static int getPackedPositionType(long packedPosition)：返回打包位置的类型；
- long getSelectedId()：返回当前选中的列表项或列表项组的ID；
- long getSelectedPosition()：返回当前选中的列表项或列表项组的位置。如果没有选中的条目则返回PACKED\_POSITION\_VALUE\_NULL；
- boolean isGroupExpanded(int groupPosition)：判断列表项组是否是展开的；
- boolean performItemClick(View v, int position, long id)：执行单击事件；
- void setAdapter(ListAdapter adapter)：设置ListAdapter；
- void setAdapter(ExpandableListAdapter adapter)：设置ExpandableListAdapter；
- void setChildDivider(Drawable childDivider)：设置列表项的分隔条；
- void setChildIndicator(Drawable childIndicator)：设置列表项指示器所用Drawable对象；
- void setChildIndicatorBounds(int left, int right)：设置列表项指示器的边界；
- void setChildIndicatorBoundsRelative(int start, int end)：设置列表项的相对边界；
- void setGroupIndicator(Drawable groupIndicator)：设置列表项组指示器所用的Drawable对象；
- void setIndicatorBounds(int left, int right)：设置列表项组指示器的边界；
- void setIndicatorBoundsRelative(int start, int end)：设置列表项指示器的相对边界；
- void setOnChildClickListener(ExpandableListView.OnChildClickListener onChildClickListener)：设置列表项单击事件的监听器；
- void setOnGroupClickListener(ExpandableListView.OnGroupClickListener onGroupClickListener)：设置列表项组的单击事件监听器；
- void setOnGroupCollapseListener(ExpandableListView.OnGroupCollapseListener onGroupCollapseListener)：设置列表项组折叠的事件监听器；
- void setOnGroupExpandListener(ExpandableListView.OnGroupExpandListener onGroupExpandListener)：设置列表项组的展开事件监听器；
- void setOnItemClickListener(AdapterView.OnItemClickListener l)：注册一个条目的单击事件监听器，使用一个ListView式的位置而不是列表项或列表项组的位置。多说情况下，应该使用setOnGroupClickListener(ExpandableListView.OnGroupClickListener)和setOnChildClickListener(ExpandableListView.OnChildClickListener)；
- boolean setSelectedChild(int groupPosition, int childPosition, boolean shouldExpandGroup)：设置选中指定列表项组中的指定列表项，并设置列表项组是否应该展开；
- void setSelectedGroup(int groupPosition)：设置选中指定的**列表项组。**

实例：

child_view.xml：

```xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <ImageView
        android:id="@+id/child_icon"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        tools:src="@drawable/garen" />

    <TextView
        android:id="@+id/child_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="5dp"
        android:layout_toEndOf="@+id/child_icon"
        android:textColor="#FF000000"
        android:textSize="20sp"
        tools:text="德玛西亚之力" />
</RelativeLayout>
```
group_view.xml：
```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:orientation="horizontal">

    <TextView
        android:id="@+id/group_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="30dp"
        android:textColor="#FF000000"
        android:textSize="20sp"
        tools:text="坦克" />
</LinearLayout>
```



```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:backgroundTint="@color/colorAccent"
        android:gravity="center"
        android:text="英雄图谱"
        android:textColor="@color/colorPrimaryDark"
        android:textSize="30sp" />

    <ExpandableListView
        android:id="@+id/expandable_list_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:groupIndicator="@drawable/group_indicator"
        android:indicatorEnd="30dp"></ExpandableListView>
</LinearLayout>
```

activity_expandable_list_view_test.xml：

```java
public class ExpandableListViewTest extends AppCompatActivity {
    private String[] groupNames = {"法师", "坦克", "射手", "战士"};
    private String[][] childStrings = {
            {"复仇焰魂", "策士统领", "黑暗之女", "卡牌大师", "猩红收割者", "末日使者", "堕落天使"},
            {"披甲龙龟", "熔岩巨兽", "牛头酋长", "亡灵战神", "炼金术士", "蒸汽机器人", "扭曲树精"},
            {"首领之傲", "赏金猎人", "战争女神", "迅捷斥候", "麦林炮手", "暗夜猎手", "寒冰射手"},
            {"德玛西亚之力", "德邦总管", "审判天使", "嗜血猎手", "蛮族之王", "武器大师", "祖安狂人"},

    };
    private int[][] child_icons = {
            {R.drawable.brand, R.drawable.swain, R.drawable.annie, R.drawable.twisted_fate,
                    R.drawable.vladimir, R.drawable.fiddlesticks, R.drawable.morganna},
            {R.drawable.rammus, R.drawable.malphite, R.drawable.alistar, R.drawable.sion,
                    R.drawable.singed, R.drawable.blitzcrank, R.drawable.maokai},
            {R.drawable.urgot, R.drawable.miss_fortune, R.drawable.sivir, R.drawable.teemo,
                    R.drawable.tristana, R.drawable.vayne, R.drawable.ashe},
            {R.drawable.garen, R.drawable.xin_zhao, R.drawable.kayle, R.drawable.warwick,
                    R.drawable.tryndamere, R.drawable.jax, R.drawable.dr_mundo}
    };
    private String[] groupStrings = {
            "发生能输出高额的伤害，也具有有效的控制", "坦克具有高额的血量、护甲和魔抗",
            "射手的远程攻击让近战英雄很头疼", "战士是近战的强者"
    };
    private String[][] heroStrings = {
            {"准备好进入火焰世界了吗？嘿嘿嘿嘿", "诺克萨斯人从来不会闲逛", "那个……你看见过我的小熊吗？",
                    "今天是我的幸运日！", "我的杯子已经空了一半", "听候您的吩咐，主人", "我们会叫他们好受的！"},
            {"一起找点儿乐子吧！", "坚如磐石！", "俺很生气，后果很严重！", "交给我吧！", "要来一杯么？",
                    "发动机已启动，随时可以出发", "这股力量……我无法控制"},
            {"他们会知道害怕的", "扬帆！起航！", "战斗吧！", "提莫队长正在待命！", "我好想射点儿什么！",
                    "我会让你死的很痛快", "明智之选"},
            {"恶人终有恶报！", "长枪依在！(菊花拿来！)", "迎接审判吧！", "这局胜负已定",
                    "我的大刀早已饥渴难耐了！", "开打开打！", "蒙多想去哪就去哪"}
    };
    private String groupString;
    private String heroString;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_expandable_list_view_test);

        ExpandableListView expandableListView = (ExpandableListView) findViewById(R.id.expandable_list_view);

        ExpandableListAdapter expandableListAdapter = new BaseExpandableListAdapter() {
            @Override
            public int getGroupCount() {
                return groupStrings.length;
            }

            @Override
            public int getChildrenCount(int groupPosition) {
                return childStrings[groupPosition].length;
            }

            @Override
            public Object getGroup(int groupPosition) {
                return groupStrings[groupPosition];
            }

            @Override
            public Object getChild(int groupPosition, int childPosition) {
                return childStrings[groupPosition][childPosition];
            }

            @Override
            public long getGroupId(int groupPosition) {
                return groupPosition;
            }

            @Override
            public long getChildId(int groupPosition, int childPosition) {
                return childPosition;
            }

            @Override
            public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
                                     ViewGroup parent) {
                convertView = LayoutInflater.from(ExpandableListViewTest.this).inflate(
                        R.layout.group_view, parent, false);
                TextView group_name = (TextView) convertView.findViewById(R.id.group_name);
                group_name.setText(groupNames[groupPosition]);
                return convertView;
            }

            @Override
            public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
                                     View convertView, ViewGroup parent) {
                convertView = LayoutInflater.from(ExpandableListViewTest.this).inflate(
                        R.layout.child_view, parent, false);
                ImageView child_icon = (ImageView) convertView.findViewById(R.id.child_icon);
                child_icon.setImageResource(child_icons[groupPosition][childPosition]);
                TextView child_name = (TextView) convertView.findViewById(R.id.child_name);
                child_name.setText(childStrings[groupPosition][childPosition]);
                return convertView;
            }

            @Override
            public boolean hasStableIds() {
                return true;
            }

            @Override
            public boolean isChildSelectable(int groupPosition, int childPosition) {
                return true;
            }
        };
        expandableListView.setAdapter(expandableListAdapter);

        //设置列表项组的点击监听事件
        expandableListView.setOnGroupExpandListener(new ExpandableListView.OnGroupExpandListener() {
            @Override
            public void onGroupExpand(int groupPosition) {
                groupString = groupStrings[groupPosition];
                showToast(groupString);

            }
        });

        //设置子选项点击监听事件
        expandableListView.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {
            @Override
            public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
                heroString = heroStrings[groupPosition][childPosition];
                showToast(heroString);
                return true;
            }
        });
    }

    public void showToast(String heroString) {
        Toast.makeText(ExpandableListViewTest.this, heroString, Toast.LENGTH_SHORT).show();
    }
}
```

显示效果如下图所示：

![ExpandableListView](C:\Users\Vincent Huang\Desktop\studynotes\Android\基础UI组件\appendix\ExpandableListView.gif)

#### **[Spinner](https://developer.android.com/reference/android/widget/Spinner.html)**

Spinner（微调框，也称列表选择框）提供一种方法，让用户可以从值集中快速选择一个值。默认状态下，微调框显示其当前所选的值。 触摸微调框可显示下拉菜单，其中列有所有其他可用值，用户可从中选择一个新值。其列表项内容也是由与其相关联的[SpinnerAdapter](https://developer.android.com/reference/android/widget/SpinnerAdapter.html)提供。

![spinner1](C:\Users\Vincent Huang\Desktop\studynotes\Android\基础UI组件\appendix\spinner1.png)

Spinner通常在 XML 布局典型用法如下：

```xml
<Spinner
    android:id="@+id/planets_spinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
```
Spinner提供了一下两个常量：

- int MODE_DIALOG：使用一个对话框来选择列表项；
- int MODE_DROPDOWN：使用下拉模式来选择列表项。


常用XML属性及对应方法
| XML属性                                    | 对应方法                                     | 描述                                       |
| ---------------------------------------- | ---------------------------------------- | ---------------------------------------- |
| [`android:dropDownHorizontalOffset`](https://developer.android.com/reference/android/widget/Spinner.html#attr_android:dropDownHorizontalOffset) | setDropDownHorizontalOffset(int)         | 下拉列表的水平偏移距离                              |
| [`android:dropDownVerticalOffset`](https://developer.android.com/reference/android/widget/Spinner.html#attr_android:dropDownVerticalOffset) | setDropDownVerticalOffset(int)           | 下拉列表的垂直偏移距离                              |
| [`android:dropDownSelector`](https://developer.android.com/reference/android/widget/Spinner.html#attr_android:dropDownSelector) |                                          | 下拉模式所用的列表选择器                             |
| [`android:dropDownWidth`](https://developer.android.com/reference/android/widget/Spinner.html#attr_android:dropDownWidth) | setDropDownWidth(int)                    | 设置下拉列表项选择列表的宽度，可以为match\_parent、wrap\_content |
| [`android:gravity`](https://developer.android.com/reference/android/widget/Spinner.html#attr_android:gravity) | setGravity(int)                          | 设置当前选中列表项的对齐方式                           |
| [`android:popupBackground`](https://developer.android.com/reference/android/widget/Spinner.html#attr_android:popupBackground) | setPopupBackgroundResource(int)          | 设置下拉列表的背景色                               |
| [`android:prompt`](https://developer.android.com/reference/android/widget/Spinner.html#attr_android:prompt) | The prompt to display when the spinner's dialog is shown. | 设置选择列表的提示信息                              |
| [`android:spinnerMode`](https://developer.android.com/reference/android/widget/Spinner.html#attr_android:spinnerMode) | Display mode for spinner options.        | 设置显示模式，可以为dialog或dropdown，对应于Spinner的两个常量 |
| [`android:entries`](https://developer.android.com/reference/android/widget/AbsSpinner.html#attr_android:entries) |                                          | 指定列表项所用的数组资源，该属性继承AbsSpinner             |

要为微调框定义选择事件处理程序，请实现 AdapterView.OnItemSelectedListener 接口以及相应的 onItemSelected() 回调方法。例如，以下是 Activity 中的一个接口实现：
```java
public class SpinnerActivity extends Activity implements OnItemSelectedListener {
    ...

    public void onItemSelected(AdapterView<?> parent, View view,
            int pos, long id) {
        // An item was selected. You can retrieve the selected item using
        // parent.getItemAtPosition(pos)
    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback
    }
}
```
如果使用 Activity 或 Fragment 来实现 AdapterView.OnItemSelectedListener 接口（如上例），则可以传递 this 作为接口实例。
```java
Spinner spinner = (Spinner) findViewById(R.id.spinner);
spinner.setOnItemSelectedListener(this);
```
Gallery也继承自AbsSpinner，用法类似于Spinner，但自API 16开始已弃用。[AppCompatSpinner](https://developer.android.com/reference/android/support/v7/widget/AppCompatSpinner.html)是Spinner新特性的兼容版本。

#### [**AutoCompleteTextView**](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

AutoCompleteTextView代表一个在输入时显示完成建议的文本框。完成建议以下拉菜单的形式显示，用户可以点击其中一条建议来快速输入。下来菜单会在按下返回键后消失，或者在没有选择建议时会在按下键盘Enter或dpad的中间键后消失。下拉列表必须在输入指定数量（[setThreshold(int)](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setThreshold(int))）的字符后才会显示。给出的建议数据由Adapter提供，典型用法如下：

```java
 public class CountriesActivity extends Activity {
     protected void onCreate(Bundle icicle) {
         super.onCreate(icicle);
         setContentView(R.layout.countries);

         ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                 android.R.layout.simple_dropdown_item_1line, COUNTRIES);
         AutoCompleteTextView textView = (AutoCompleteTextView)
                 findViewById(R.id.countries_list);
         textView.setAdapter(adapter);
     }

     private static final String[] COUNTRIES = new String[] {
         "Belgium", "France", "Italy", "Germany", "Spain"
     };
 }
```

该类提供了以下常用XML属性

| XML属性                                    | 对应方法                                     | 描述                                   |
| ---------------------------------------- | ---------------------------------------- | ------------------------------------ |
| [`android:completionHint`](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android:completionHint) | [setCompletionHint(CharSequence)](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setCompletionHint(java.lang.CharSequence)) | String类型。指定提示文本，注意某些转义字符             |
| [`android:completionHintView`](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android:completionHintView) |                                          | 指定提示的View                            |
| [`android:completionThreshold`](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android:completionThreshold) | [setThreshold(int)](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setThreshold(int)) | 指定显示下拉菜单所需要的输入字符数                    |
| [`android:dropDownAnchor`](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android:dropDownAnchor) | [setDropDownAnchor(int)](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setDropDownAnchor(int)) | 指定下拉菜单显示的锚点View，如果没有指定则使用该View       |
| [`android:dropDownHeight`](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android:dropDownHeight) | [setDropDownHeight(int)](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setDropDownHeight(int)) | 指定下拉菜单高度，可以为math_parent，wrap_content |
| [`android:dropDownHorizontalOffset`](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android:dropDownHorizontalOffset) | [setDropDownHorizontalOffset(int)](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setDropDownHorizontalOffset(int)) | 指定下拉菜单的水平偏移距离                        |
| [`android:dropDownSelector`](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android:dropDownSelector) |                                          | 指定下拉列表的选择器，可以是一个颜色值                  |
| [`android:dropDownVerticalOffset`](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android:dropDownVerticalOffset) | [setDropDownVerticalOffset(int)](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setDropDownVerticalOffset(int)) | 指定下拉菜单的垂直偏移距离                        |
| [`android:dropDownWidth`](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android:dropDownWidth) | [setDropDownWidth(int)](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setDropDownWidth(int)) | 指定下拉菜单宽度，可以为math_parent，wrap_content |
| [`android:popupBackground`](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android:popupBackground) | [setDropDownBackgroundResource(int)](https://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setDropDownBackgroundResource(int)) | 设置弹出窗口的背景色                           |

AutoCompleteTextView还有一个子类MultiAutoCompleteTextView，该类可以提供多个输入提示，多个输入提示以指定分隔符分隔，该类的setTokenizer()方法来设置分隔符。AppCompatAutoCompleteTextView是AutoCompleteTextView的兼容子类。

实例：

activity_auto_complete_text_view_test.xml：

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/activity_auto_complete_text_view_test"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <AutoCompleteTextView
        android:id="@+id/auto_text_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:completionHint="请输入图书名"
        android:completionThreshold="5"
        android:dropDownSelector="@color/colorPrimary"
        android:textAllCaps="false"
        android:textSize="15sp" />

    <MultiAutoCompleteTextView
        android:id="@+id/multi_auto_text_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:completionHint="请输入多个图书名，以英文逗号分隔"
        android:completionThreshold="5"
        android:dropDownSelector="@color/colorAccent"
        android:textAllCaps="false"
        android:textSize="15sp" />

</LinearLayout>
```

```java
public class AutoCompleteTextViewTest extends AppCompatActivity {

    private String[] bookNames = new String[]{
            "Head First Java", "Head First Android", "Head First C++",
            "Head First Web", "Head First PHP"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_auto_complete_text_view_test);
        AutoCompleteTextView autoCompleteTextView = (AutoCompleteTextView) findViewById(
                R.id.auto_text_view);
        MultiAutoCompleteTextView multiAutoCompleteTextView = (MultiAutoCompleteTextView) findViewById(
                R.id.multi_auto_text_view);
        ArrayAdapter<String> arrayAdapter = new ArrayAdapter<>(this, android.R.layout.simple_dropdown_item_1line,
                bookNames);
        autoCompleteTextView.setAdapter(arrayAdapter);
        multiAutoCompleteTextView.setAdapter(arrayAdapter);
        multiAutoCompleteTextView.setTokenizer(new MultiAutoCompleteTextView.CommaTokenizer());
    }
}
```

显示效果如下图所示：

![AutoCompleteTextView](C:\Users\Vincent Huang\Desktop\studynotes\Android\基础UI组件\appendix\AutoCompleteTextView.gif)

#### [**StackView**](https://developer.android.com/reference/android/widget/StackView.html)

StackView 是 AdapterViewFlipper 的子类，以堆叠的形式显示 Adapter 提供的多个列表项。常用方法如下：

- boolean	onGenericMotionEvent(MotionEvent event)：实现该方法来来处理一般动作事件；
- booleanonInterceptTouchEvent(MotionEvent ev)：实现该方法来拦截触屏事件；
- booleanonTouchEvent(MotionEvent ev)：实现该方法来处理触屏事件；
- void showNext()：手动显示下一个子项；
- void showPrevious()：手动显示前一个子项。

实例：

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <StackView
        android:id="@+id/mStackView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:loopViews="true" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="prev"
            android:text="上一个" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="next"
            android:text="下一个" />
    </LinearLayout>
</LinearLayout>
```

```java
public class StackViewTest extends AppCompatActivity {

    StackView stackView;
    int[] imageIds = new int[]
            {
                    R.drawable.alistar, R.drawable.annie, R.drawable.blitzcrank,
                    R.drawable.garen, R.drawable.jax, R.drawable.kayle,
                    R.drawable.malphite, R.drawable.maokai, R.drawable.miss_fortune,
                    R.drawable.xin_zhao, R.drawable.warwick, R.drawable.urgot
            };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_stack_view_test);
        stackView = (StackView) findViewById(R.id.mStackView);
        // 创建一个List对象，List对象的元素是Map
        List<Map<String, Object>> listItems =
                new ArrayList<>();
        for (int i = 0; i < imageIds.length; i++) {
            Map<String, Object> listItem = new HashMap<>();
            listItem.put("image", imageIds[i]);
            listItems.add(listItem);
        }
        // 创建一个SimpleAdapter
        SimpleAdapter simpleAdapter = new SimpleAdapter(this,
                listItems
                // 使用/layout/cell.xml文件作为界面布局
                , R.layout.stack_view_cell, new String[]{"image"},
                new int[]{R.id.stack_cell_img});
        stackView.setAdapter(simpleAdapter);
    }

    public void prev(View view) {
        // 显示上一个组件
        stackView.showPrevious();
    }

    public void next(View view) {
        // 显示下一个组件
        stackView.showNext();
    }
}
```

显示效果如下图所示：

![StackView](C:\Users\Vincent Huang\Desktop\studynotes\Android\基础UI组件\appendix\StackView.gif)

#### [**AdapterViewFlipper**](https://developer.android.com/reference/android/widget/AdapterViewFlipper.html)

AdapterViewFlipper 也是 AdapterViewFlipper 的子类，每次显示一个 Adapter 提供的一个 View，在切换 View 时可以使用渐隐渐显动画效果。常用XML属性如下：

| XML属性                                    | 描述                                   |
| ---------------------------------------- | ------------------------------------ |
| [`android:animateFirstView`](https://developer.android.com/reference/android/widget/AdapterViewAnimator.html#attr_android:animateFirstView) | 布尔值。指定显示第一个 View 是否使用动画              |
| [`android:inAnimation`](https://developer.android.com/reference/android/widget/AdapterViewAnimator.html#attr_android:inAnimation) | 指定进入动画                               |
| [`android:loopViews`](https://developer.android.com/reference/android/widget/AdapterViewAnimator.html#attr_android:loopViews) | 布尔值。指定是否在显示完所有 View 之后自动循环显示第一个 View |
| [`android:outAnimation`](https://developer.android.com/reference/android/widget/AdapterViewAnimator.html#attr_android:outAnimation) | 指定移出动画                               |

常用方法如下：

- boolean	onTouchEvent(MotionEvent ev)：实现该方法来处理触屏动作事件；
- void setAdapter(Adapter adapter)：设置 Adapter；
- void setAnimateFirstView(boolean animate)：设置显示第一个 View 时是否使用动画；
- void setDisplayedChild(int whichChild)：设置显示哪一个 View；
- void setInAnimation(ObjectAnimator inAnimation)：设置进入动画；
- void setInAnimation(Context context, int resourceID)：设置进入动画；
- void setOutAnimation(ObjectAnimator outAnimation)：设置移出动画；
- void setOutAnimation(Context context, int resourceID：设置移出动画；
- void setRemoteViewsAdapter(Intent intent)：设置该 AdapterViewAnimator 通过一个指定的 Intent 来连接到一个 RemoteViewService；
- void setSelection(int position)：设置当前选中的条目；
- void showNext()：手动显示下一个 View；
- void showPrevious()：手动显示上一个 View。


实例：

```xml
<?xml version="1.0" encoding="utf-8" ?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <AdapterViewFlipper
        android:id="@+id/flipper"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:flipInterval="1000"
        android:layout_alignParentTop="true"/>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:onClick="prev"
        android:text="上一个"/>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:onClick="next"
        android:text="下一个"/>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:onClick="auto"
        android:text="自动播放"/>
</RelativeLayout>
```

```java
public class AdapterViewFlipperTest extends AppCompatActivity {

    int[] imageIds = new int[]
            {
                    R.drawable.meinv0, R.drawable.meinv1, R.drawable.meinv2,
                    R.drawable.meinv3, R.drawable.meinv4, R.drawable.meinv5,
                    R.drawable.meinv6, R.drawable.meinv7, R.drawable.meinv8,
                    R.drawable.meinv9, R.drawable.meinv10, R.drawable.meinv11
            };
    private AdapterViewFlipper flipper;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_adapter_view_flipper);
        flipper = (AdapterViewFlipper) findViewById(R.id.flipper);
        // 创建一个BaseAdapter对象，该对象负责提供Gallery所显示的列表项
        BaseAdapter adapter = new BaseAdapter() {
            @Override
            public int getCount() {
                return imageIds.length;
            }

            @Override
            public Object getItem(int position) {
                return position;
            }

            @Override
            public long getItemId(int position) {
                return position;
            }

            // 该方法返回的View代表了每个列表项
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                // 创建一个ImageView
                ImageView imageView = new ImageView(AdapterViewFlipperTest.this);
                imageView.setImageResource(imageIds[position]);
                // 设置ImageView的缩放类型
                imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);
                // 为imageView设置布局参数
                imageView.setLayoutParams(new ViewGroup.LayoutParams(
                        ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));
                return imageView;
            }
        };
        flipper.setAdapter(adapter);
    }

    public void prev(View source) {
        // 显示上一个组件
        flipper.showPrevious();
        // 停止自动播放
        flipper.stopFlipping();
    }

    public void next(View source) {
        // 显示下一个组件。
        flipper.showNext();
        // 停止自动播放
        flipper.stopFlipping();
    }

    public void auto(View source) {
        // 开始自动播放
        flipper.startFlipping();
    }
}
```

显示效果如下图所示：

![AdapterViewFlipper](C:\Users\Vincent Huang\Desktop\studynotes\Android\基础UI组件\appendix\AdapterViewFlipper.gif)


###  [**Adapter**](https://developer.android.com/reference/android/widget/Adapter.html)

Adapter接口继承体系如下图所示：

![Adapter](appendix\Adapter.png)

Adapter扮演了一个AdapterView与其底层数据之间的桥梁，Adapter提供了数据项的访问，并负责为每个数据项都创建相应的视图。Adapter提供了两个常量：

- [IGNORE_ITEM_VIEW_TYPE](https://developer.android.com/reference/android/widget/Adapter.html#IGNORE_ITEM_VIEW_TYPE)：代表一个AdapterView会忽略的View类型。如果不想将一个特殊的View通过getView(int, View, ViewGroup)方法来转换，就可为其指定该类型。该类型会影响getItemViewType(int)和getViewTypeCount()方法的返回值；
- NO\_SELECTION：没有选择。

Adapter还提供了以下抽象方法：

- abstract int getCount()：返回该Adapter中数据集中数据项的数目；
- abstract Object getItem(int position)：返回数据集中指定位置处的数据项；
- abstract long getItemId(int position)：返回列表中指定位置处数据项的列id；
- abstract int getItemViewType(int position)：返回由getView(int, View, ViewGroup) 方法为指定数据项创建的View类型。返回的整数值代表View的类型，如果两个View通过getView(int, View, ViewGroup) 方法可以相互转换，那么这两个View将共用一个类型。返回值必须在0~getViewTypeCount() - 1的范围内， 也可以返回IGNORE\_ITEM\_VIEW\_TYPE；
- abstract ViewgetView(int position, View convertView, ViewGroup parent)：返回在数据集中、指定位置处、用于显示数据项的视图。可以手动创建一个View或者从XML布局文件中加载一个View。填充View时，其父View（ListView、GridView等）将使用默认的布局参数，除非使用inflate(int, android.view.ViewGroup, boolean)来指定一个根View来阻止该View添加到默认应添加到的根View。convertView参数代表可重用的View（如果可用的话），应该在使用前核对该View为非空且为合适的类型。如果可以将convertView转换为显示数据项的View，该方法将创建一个新View。多相列表可以指定其View类型的数量，这样View就可以总是正确的类型。parent参数指定该View将被添加到的ViewGroup；
- abstract int getViewTypeCount()： 返回将会由getView(int, View, ViewGroup)方法创建的视图的类型数量。每种类型代表一系列可在getView(int, View, ViewGroup)方法中转换的视图。如果该Adapter一直返回相同的View类型，则该方法返回1。仅当该Adapter被设置到AdapterView上时该方法才会被调用；
- abstract  boolean hasStableIds()：表明数据项的ID在底层数据改变时是否是稳定的；
- abstract boolean isEmpty()：判断该Adapter是否不含任何数据。如果为空，则getCount() 方法返回值为0，但是该方法包含了页眉和页脚视图，所以一些特殊Adapter可能会有不同的行为；
- abstract void registerDataSetObserver(DataSetObserver observer)：注册一个DataSetObserver（数据集观察器），当该Adapter所使用的数据集发生改变时就调用该DataSetObserver；
- abstract void unregisterDataSetObserver(DataSetObserver observer)：移除通过registerDataSetObserver(DataSetObserver)方法注册的DataSetObserver。

[**ListAdapter**](https://developer.android.com/reference/android/widget/ListAdapter.html)代表用于ListView的适配器，提供了以下两个抽象方法：

- abstract boolean areAllItemsEnabled()：表明该适配器中所有列表项是否可用；
- abstract boolean isEnabled(int position)：判断指定位置的列表项是不是分隔符（用于分隔符的列表项不会被选中、点击也无相应），如果不是就返回true。

#### [**BaseAdapter**](https://developer.android.com/reference/android/widget/BaseAdapter.html)

实现了ListAdapter和SpinnerAdapter，是Adapter一般实现类的抽象基类，继承该类可以创建既适用于ListView，也适用于Spinner的适配器。扩展BaseAdapter可以实现对Adapter的最大控制权。除了其从父接口继承来的方法，BaseAdapter提供了以下两个方法：

- void notifyDataSetChanged ()：通知相关DataSetObserver基础数据发生了变化，每个显示数据项的View应该刷新自己；
- void notifyDataSetInvalidated ()：通知相关DataSetObserver基础数据已失效或不可用。一旦调用该方法，该Adapter就不可用了，也不应在报告数据集之后的变化。

实现该抽象类需要实现以下四个方法：

- int getCount()：该方法的返回值控制该Adapter将包含多少个列表项；
- Object getItem(int position)：该方法的返回值决定第position处的列表项的内容；
- long getItemId(int position)：该方法的返回值决定第position处的列表项的ID；
- int getItemViewType(int position)：该方法的返回值决定第position处的列表项组件。

实例：

activity_base_adapter.xml：

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ListView
        android:id="@+id/base_adapter_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />
</LinearLayout>
```

```java
public class BaseAdapterTest extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_base_adapter);

        ListView baseAdapaterListView = (ListView) findViewById(R.id.base_adapter_list);
        BaseAdapter baseAdapter = new BaseAdapter() {

            //该方法返回列表中列表项的数目
            @Override
            public int getCount() {
                return 30;
            }

            //该方法返回数据集中指定位置列表项的数据内容
            @Override
            public Object getItem(int position) {
                return null;
            }

            //该方法返回数据集中指定位置的条目在列表中的行Id
            @Override
            public long getItemId(int position) {
                return position;
            }

            //该方法返回在列表中用来显示数据集中指定位置的条目的View
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                //创建一个LinearLayout，并向其中添加组件
                LinearLayout linearLayout = new LinearLayout(BaseAdapterTest.this);
                linearLayout.setOrientation(LinearLayout.HORIZONTAL);
                ImageView imageView = new ImageView(BaseAdapterTest.this);
                imageView.setImageResource(R.mipmap.ic_launcher);
                TextView textView = new TextView(BaseAdapterTest.this);
                textView.setText("第" + String.valueOf(position + 1) + "个列表项");
                textView.setTextSize(20);
                textView.setTextColor(Color.CYAN);

                linearLayout.addView(imageView);
                linearLayout.addView(textView);

                return linearLayout;
            }
        };

        baseAdapaterListView.setAdapter(baseAdapter);
    }
}
```

显示效果如下图所示：

![BaseAdapter](C:\Users\Vincent Huang\Desktop\studynotes\Android\基础UI组件\appendix\BaseAdapter.png)

#### [**ArrayAdapter<T>**](https://developer.android.com/reference/android/widget/ArrayAdapter.html)

该类是BaseAdapter的一个具体实现类，包装了一个数组或List。该类默认提供的资源Id指向一个简单的TextView，如果你想使用更复杂的布局，就使用含有资源Id参数的构造器，该Id参数指向一个在更大布局资源中的TextView。所指向的TextView将显示数组或List中每个元素的toString()方法返回的字符串，可以通过重写元素对象的toString()方法来决定列表中数据项将显示的文本。

如果使用其他View（如ImageView）来代替TextView，或者除了toString()返回的字符串还想显示getView(int, View, ViewGroup) 方法来返回你所期望的View类型。

常用构造器：

- ArrayAdapter(Context context, int resource, T[] objects)：
- ArrayAdapter(Context context, int resource, int textViewResourceId, T[] objects)
- ArrayAdapter(Context context, int resource, List\<T> objects)
- ArrayAdapter(Context context, int resource, int textViewResourceId, List<> objects)

以上构造器中，Context context代表当前上下文，几乎创建所有视图都需要传入该类型的参数；int resource代表一个资源Id，指向一个包含TextView的布局文件，该TextView将用来显示数据项；int textViewResourceId代表一个资源Id，指向布局资源中用来填充数据的Textview；T[]/List\<T> objects代表的数组或List用于为所有数据项提供数据。

实例：

activity_array_adapter_test.xml：

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ListView
        android:id="@+id/array_adapter_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:divider="#FF003355"
        android:dividerHeight="1dp" />
</LinearLayout>
```

```java
public class ArrayAdapterTest extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_array_adapter_test);

        ListView arrayAdapterListView = (ListView) findViewById(R.id.array_adapter_view);

        String[] names = {"李小璐", "贾乃亮了", "高圆圆", "赵又廷了"};

        //将数组包装成ArrayAdapter
        ArrayAdapter<String> arrayAdapter = new ArrayAdapter<>(this,
                R.layout.array_adapter_test_view, R.id.array_adapter_view, names);

        arrayAdapterListView.setAdapter(arrayAdapter);
    }
}
```

显示效果如下图所示：

![ArrayAdapter](C:\Users\Vincent Huang\Desktop\studynotes\Android\基础UI组件\appendix\ArrayAdapter.png)

#### [**SimpleAdapter**](https://developer.android.com/reference/android/widget/SimpleAdapter.html)

该类也是BaseAdapter的一个具体实现类，包装了List集合，集合元素为静态数据到View的映射(Map)，即Map&lt;String, ?>类型，每个Map代表列表中的一行，Map中的每个key——value指定了。可以在XML中定义用来显示一行数据的View，Map中key对应的映射用来即为该View。

SimpleAdapter有一个内部接口[SimpleAdapter.ViewBinder](https://developer.android.com/reference/android/widget/SimpleAdapter.ViewBinder.html)，该内部接口提供了一个abstract boolean	setViewValue(View view, Object data, String textRepresentation)的抽象方法，该方法用来给view绑定data，textRepresentation为一个代表data的安全字符串（要么是data.toString()或空字符串，但是不为null）。应该使用该接口为SimpleAdapter不支持View绑定数据，或者为SimpleAdapter支持的View改变绑定方式。

给View绑定数据分两步：如果SimpleAdapter.ViewBinder可用，则调用其setViewValue()。如果返回为true，就绑定数据，如果返回false，将依次尝试以下View：

1. 实现Checkable接口的View（如CheckBox）。绑定值为boolean类型；
2. TextView。绑定值为一个字符串，并且SimpleAdapter.setViewText(TextView, String) 也会被调用；
3. ImageView。绑定值是一个资源Id，或者一个字符串，并且SimpleAdapter.setViewImage(ImageView, int)或SimpleAdapter.settViewImage(ImageView, String)方法将会被调用。

如果没有找到绑定，则会抛出IllegalStateException异常。

该类的构造方法为SimpleAdapter(Context context, List<? extends Map<String, ?>> data, int resource, String[] from, int[] to)，其中第一个参数代表SimpleAdapter运行的上下文环境，第三个参数int resource指定了显示一个列表项所用的布局资源，第二个参数List data中的每个List元素代表列表中的一项，一个List元素即Map对象的所有key包含第四个参数String[] from的所有元素，from中的字符串元素决定了哪些key对应的value来用于生成列表项，Map对象中所有的value包含第五个参数int[] to中所有元素，to中的资源Id指定填充布局中的哪些View。

实例：

activity_simple_adapter_test.xml：

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <ListView
        android:id="@+id/simple_adapter_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />
</LinearLayout>
```

```java
public class SimpleAdapterTest extends AppCompatActivity {

    private String[] names = new String[]{"杜特尔特", "特朗不靠谱", "普大帝"};
    private String[] description = new String[]{"实干派", "大嘴", "硬汉"};
    private int[] imgID = new int[]{R.drawable.duterte, R.drawable.trump, R.drawable.putin};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_simple_adapter_test);

        ListView simpleAdapterListView = (ListView) findViewById(R.id.simple_adapter_list);

        List<Map<String, Object>> itemLists = new ArrayList<>();
        for (int i = 0; i < names.length; i++) {
            Map<String, Object> listItem = new HashMap<>();
            listItem.put("names", names[i]);
            listItem.put("description", description[i]);
            listItem.put("header", imgID[i]);
            itemLists.add(listItem);
        }
        SimpleAdapter simpleAdapter = new SimpleAdapter(this, itemLists, R.layout.simple_adapter_list_item,
                new String[]{"names", "description", "header"}, new int[]{R.id.name_view, R.id.desc_view,
                R.id.header_view});
        simpleAdapterListView.setAdapter(simpleAdapter);
    }
}
```

显示效果如下图所示：

![SimpleAdapter](C:\Users\Vincent Huang\Desktop\studynotes\Android\基础UI组件\appendix\SimpleAdapter.png)

#### [**SpinnerAdapter**](https://developer.android.com/reference/android/widget/SpinnerAdapter.html)

代表用于[Spinner](https://developer.android.com/reference/android/widget/Spinner.html)（下拉列表）的适配器，也提供一个抽象方法：

- abstract View getDropDownView(int position, View convertView, ViewGroup parent)：返回在下拉弹出框中显示该数据集中指定位置数据的View。

实例：

activity_spinner_test.xml：

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/activity_spinner_test"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <android.support.v7.widget.AppCompatSpinner
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/spinner_items"
        android:prompt="@string/leaders"
        android:spinnerMode="dropdown" />

    <android.support.v7.widget.AppCompatSpinner
        android:id="@+id/summoner_spinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:prompt="@string/summoner_name"
        android:spinnerMode="dialog" />

</LinearLayout>
```

```java
public class SpinnerTest extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_spinner_test);

        AppCompatSpinner summoner_spinner = (AppCompatSpinner) findViewById(R.id.summoner_spinner);
        final String[] summonerNames = new String[]{
                "Alistar", "Annie", "Ashe", "Blitzcrank",
                "Brand", "Garen", "Jax", "Kayle"};
        ArrayAdapter<String> arrayAdapter = new ArrayAdapter<>(this,
                android.R.layout.simple_dropdown_item_1line, summonerNames);
        summoner_spinner.setAdapter(arrayAdapter);

        summoner_spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                showToast(summonerNames[position]);
            }

            @Override
            public void onNothingSelected(AdapterView<?> parent) {

            }
        });
    }

    private void showToast(String name) {
        Toast.makeText(this, name, Toast.LENGTH_SHORT).show();
    }
}
```

显示效果如下图所示：

![Spinner](C:\Users\Vincent Huang\Desktop\studynotes\Android\基础UI组件\appendix\Spinner.gif)



