## **ViewAnimator及其子类详解**

![ViewAnimator](C:\Users\Vincent Huang\Desktop\studynotes\Android\基础UI组件\appendix\ViewAnimator.png)

### [**ViewAnimator**]([ImageSwitcher](https://developer.android.com/reference/android/widget/ImageSwitcher.html))

ViewAnimator的子类可以在View切换时显示动画效果。其常用的XML属性如下：

| 描述                                       | XML属性                          |
| ---------------------------------------- | :----------------------------- |
| [`android:animateFirstView`](https://developer.android.com/reference/android/widget/ViewAnimator.html#attr_android:animateFirstView) | 设置ViewAnimator显示第一个View时是否使用动画 |
| [`android:inAnimation`](https://developer.android.com/reference/android/widget/ViewAnimator.html#attr_android:inAnimation) | 设置ViewAnimator显示View时所用的动画     |
| [`android:outAnimation`](https://developer.android.com/reference/android/widget/ViewAnimator.html#attr_android:outAnimation) | 设置ViewAnimator隐藏View时所用的动画     |

常用方法如下：

- void	 showNext()：手动显示下一个View；
- void	 showPrevious()：手动显示上一个View；
- void	 setInAnimation(Context context, int resourceID)：设置 View 的进入动画；
- void	 setInAnimation(Animation inAnimation)：设置 View 的进入动画；
- void	 setOutAnimation(Animation outAnimation)：设置 View 的移出动画；
- void	 setOutAnimation(Context context, int resourceID)：设置 View 的移出动画；
- void setDisplayedChild(int whichChild)：设置显示哪一个 View；
- void	 setAnimateFirstView(boolean animate)：设置显示第一个 View 时是否使用动画；

### [**ViewSwitcher**](https://developer.android.com/reference/android/widget/ViewSwitcher.html)

ViewSwitcher代表一个切换两个View（仅有两个View）的ViewAnimator，每次显示一个View。它有一个可以创建其内部View的[ViewSwitcher.ViewFactory](https://developer.android.com/reference/android/widget/ViewSwitcher.ViewFactory.html) 函数式接口（需要重写其makeView()方法），该接口用来创建 ViewSwitcher 内部的View。常用方法如下：

- void	 addView(View child, int index, ViewGroup.LayoutParams params)：添加一个View；
- View getNextView()：返回下一个将要显示的View；
- void	 reset()：重置该 ViewSwitcher 来隐藏所有View，并且让它以为第一次的动画还未播放；
- void	 setFactory(ViewSwitcher.ViewFactory factory)：设置创建两个View所用的 ViewSwitcher.ViewFactory。

### [**ImageSwitcher**](https://developer.android.com/reference/android/widget/ImageSwitcher.html)

ImageSwitcher 继承自 ImageSwitcher ，只能包含ImageView，其内部接口 ViewFactory 的 makeView() 方法只能返回 ImageView 对象。可以通过 void  setImageDrawable(Drawable drawable) 、void setImageResource(int resid)、void setImageURI(Uri uri)等方法来切换 ImageSwitcher 的图像资源：

### [**TextSwitcher**](https://developer.android.com/reference/android/widget/TextSwitcher.html)

TextSwitcher 继承自ViewSwitcher，只能包含 TextView ，其内部接口 ViewFactory 的makeView()方法只能返回TextView对象。

### [**ViewFlipper**](https://developer.android.com/reference/android/widget/ViewFlipper.html)

ViewFlipper 继承自 ViewAnimator，一次只能显示一个 View，可以通过其 addView()方法来添加多个 View，切换 View 时可以显示切换的动画效果。也可以在指定的时间间隔后来显示切换动画，相等于幻灯片效果。其独有的XML属性如下：

| XML属性描述                                  | 描述                     |
| ---------------------------------------- | ---------------------- |
| [`android:autoStart`](https://developer.android.com/reference/android/widget/ViewFlipper.html#attr_android:autoStart) | 布尔值。设置是否自动切换           |
| [`android:flipInterval`](https://developer.android.com/reference/android/widget/ViewFlipper.html#attr_android:flipInterval) | 整数值。设置自动切换的时间间隔，以毫秒为单位 |

常用方法如下：

- boolean isAutoStart()：判断是否自动切换；
- boolean	isFlipping()：判断是否正在切换；
- void	 setAutoStart(boolean autoStart)：设置为自动切换；
- void	 setFlipInterval(int milliseconds)：设置自动切换的间隔时间，以毫秒数为单位；
- void	 startFlipping()：开始循环切换View；
- void	 stopFlipping()：停止切换。

