### ls 命令

#### 描述

**ls 命令**用来显示目标列表，在 Linux 中是使用率较高的命令。ls 命令的输出信息可以进行彩色加亮显示，以分区不同类型的文件。

#### 语法

```
ls [OPTION]... [FILE]...
```

##### 选项

```
 -a, --all：显示所有文件，包括隐藏的文件；
-A, --almost-all：显示除“.”和“..”以外的所有文件列表，包括隐藏的文件；
-C：多列显示输出结果，仅显示出名称。这是默认选项；
-l：与“-C”选项功能相反，所有输出信息用单列格式输出，不输出为多列。输出的信息比较详细；
-F, --classify ：在每个输出项后追加文件的类型标识符，具体含义：“*”表示具有可执行权限的普通文件，“/”表示目录，“@”表示符号链接，“|”表示命令管道FIFO，“=”表示sockets套接字。当文件为普通文件时，不输出任何标识符；
-b：将文件中的不可输出的字符以反斜线“\”加字符编码的方式输出（转义形式）；
--block-size=SIZE：以SIZE指定的单位显示文件大小。SIZE可以为 K, M, G, T, P, E, Z, Y (1024的幂)或 KB, MB, ... (1000的幂)；
-B, --ignore-backups：不显示以“~”结尾的备份文件；
-c：与“-lt”选项连用时，按照文件的 ctime 排序输出文件列表，排序的依据是文件的索引节点中的 ctime 字段。与“-l”选项连用时，显示 ctime 并按文件名排序，否则按 ctime 排序，最新的文件在前面；
-d, --directory：仅显示目录名，而不显示目录下的内容列表。显示符号链接文件本身，而不显示其所指向的目录列表；
-U：不分类，按目录顺序列出文件列表；
-f：此选项的效果和同时指定“aU”选项相同，并关闭“-ls --color”选项的效果；
-i, --inode：显示文件索引节点号（inode）。一个索引节点唯一代表一个文件；
--file-type：与“-F”选项的功能相同，但是不显示“*”；
-k：以KB（千字节）为单位显示文件大小；
-l：以长格式显示目录下的内容列表。输出的信息从左到右依次包括文件名，文件类型、权限模式、硬连接数、所有者、组、文件大小和文件的最后修改时间等；
-h, --human-readable：与“-l”选项连用，以更强的可阅读性显示输出文件大小。
-m：用“,”号分隔每个文件和目录的名称；
-n：以用户识别码和群组识别码替代其名称；
-r：当排序输出时以逆序排列输出文件列表；
-R, --recursive：递归显示出子文件中的文件列表；
-s：显示文件和目录的大小，以区块为单位；
-L：如果遇到性质为符号链接的文件或目录，直接列出该链接所指向的原始文件或目录；
-R：递归处理，将指定目录下的所有文件及子目录一并处理；
--full-time：列出完整的日期与时间；
--color[=WHEN]：使用不同的颜色高亮显示不同类型的。可以是 never、auto、always（默认）。LS_COLORS 环境变量可以设置输出颜色的配置。
-1:按每个文件一行输出；
-X：按文件扩展名的字母顺序排列；
-S：以文件大小排序；
-t：用文件的 mtime 排序，较新的文件在前；
--sort=WORD：根据 WORD 来排列输出结果。WORD 可以为-U（none）、-S（size）、-t（time）、-v（version）、-X（extension）；
--time=WORD：与“-l”选项一起，按 WORD 指定的时间来替代默认的 mtime。WORD 可以为 atime 或 access 或 use（-u）、ctime 或 status（-c）。如果还使用了“--sort=time”选项，则可以使用指定的时间作为排序依据。
```

##### 参数

指定要显示列表的目录，也可以是具体的文件列表。

#### 实例

1. ls 命令的无选项形式显示当前目录下非隐藏文件与目录。

```
[root@localhost ~]# ls
anaconda-ks.cfg  install.log  install.log.syslog  satools
```

2. ls -a 显示当前目录下包括隐藏文件在内的所有文件列表。

```
[root@localhost ~]# ls -a
.   anaconda-ks.cfg  .bash_logout   .bashrc  install.log         .mysql_history  satools  .tcshrc   .vilocalhostc
..  .bash_history    .bash_profile  .cshrc   install.log.syslog  .rnd            .ssh     .viminfo
```

3. ls -l 输出长格式列表。

```
[root@localhost ~]# ls -l
anaconda-ks.cfg
install.log
install.log.syslog
satools
```

4. ls -i 显示文件的inode信息

索引节点（index inode，简称为“inode”）是Linux中一个特殊的概念。具有相同的索引节点号的两个文本本质上是同一个文件（除文件名不同外）。

```
[root@localhost ~]# ls -il anaconda-ks.cfg install.log
2345481 -rw------- 1 root root   859 Jun 11 22:49 anaconda-ks.cfg
2345474 -rw-r--r-- 1 root root 13837 Jun 11 22:49 install.log
```

5. ls -m 以逗号分隔输出结果。

```
[root@localhost /]# ls -m
bin, boot, data, dev, etc, home, lib, lost+found, media, misc, mnt, opt, proc, root, sbin, selinux, srv, sys, tmp, usr, var
```

6. ls -t 按最近修改时间排列输出结果，最近修改的文件显示在最上面。

```
[root@localhost /]# ls -t
tmp  root  etc  dev  lib  boot  sys  proc  data  home  bin  sbin  usr  var  lost+found  media  mnt  opt  selinux  srv  misc
```

7. ls -R 显示递归文件。

```
[root@localhost ~]# ls -R
.:
anaconda-ks.cfg  install.log  install.log.syslog  satools

./satools:
black.txt  freemem.sh  iptables.sh  lnmp.sh  mysql  php502_check.sh  ssh_safe.sh

```

8. ls -n 打印文件的UID和GID

```
[root@localhost /]# ls -n
total 254
drwxr-xr-x   2 0 0  4096 Jun 12 04:03 bin
drwxr-xr-x   4 0 0  1024 Jun 15 14:45 boot
drwxr-xr-x   6 0 0  4096 Jun 12 10:26 data
drwxr-xr-x  10 0 0  3520 Sep 26 15:38 dev
drwxr-xr-x  75 0 0  4096 Oct 16 04:02 etc
drwxr-xr-x   4 0 0  4096 Jun 12 10:26 home
drwxr-xr-x  14 0 0 12288 Jun 16 04:02 lib
drwx------   2 0 0 16384 Jun 11 22:46 lost+found
drwxr-xr-x   2 0 0  4096 May 11  2011 media
drwxr-xr-x   2 0 0  4096 Nov  8  2010 misc
drwxr-xr-x   2 0 0  4096 May 11  2011 mnt
drwxr-xr-x   2 0 0  4096 May 11  2011 opt
dr-xr-xr-x 232 0 0     0 Jun 15 11:04 proc
drwxr-x---   4 0 0  4096 Oct 15 14:43 root
drwxr-xr-x   2 0 0 12288 Jun 12 04:03 sbin
drwxr-xr-x   2 0 0  4096 May 11  2011 selinux
drwxr-xr-x   2 0 0  4096 May 11  2011 srv
drwxr-xr-x  11 0 0     0 Jun 15 11:04 sys
drwxrwxrwt   3 0 0 98304 Oct 16 08:45 tmp
drwxr-xr-x  13 0 0  4096 Jun 11 23:38 usr
drwxr-xr-x  19 0 0  4096 Jun 11 23:38 var

```

9. ls -l 列出文件和文件夹的详细信息（使用频率高）。

```
[root@localhost /]# ls -l
total 254
drwxr-xr-x   2 root root  4096 Jun 12 04:03 bin
drwxr-xr-x   4 root root  1024 Jun 15 14:45 boot
drwxr-xr-x   6 root root  4096 Jun 12 10:26 data
drwxr-xr-x  10 root root  3520 Sep 26 15:38 dev
drwxr-xr-x  75 root root  4096 Oct 16 04:02 etc
drwxr-xr-x   4 root root  4096 Jun 12 10:26 home
drwxr-xr-x  14 root root 12288 Jun 16 04:02 lib
drwx------   2 root root 16384 Jun 11 22:46 lost+found
drwxr-xr-x   2 root root  4096 May 11  2011 media
drwxr-xr-x   2 root root  4096 Nov  8  2010 misc
drwxr-xr-x   2 root root  4096 May 11  2011 mnt
drwxr-xr-x   2 root root  4096 May 11  2011 opt
dr-xr-xr-x 232 root root     0 Jun 15 11:04 proc
drwxr-x---   4 root root  4096 Oct 15 14:43 root
drwxr-xr-x   2 root root 12288 Jun 12 04:03 sbin
drwxr-xr-x   2 root root  4096 May 11  2011 selinux
drwxr-xr-x   2 root root  4096 May 11  2011 srv
drwxr-xr-x  11 root root     0 Jun 15 11:04 sys
drwxrwxrwt   3 root root 98304 Oct 16 08:48 tmp
drwxr-xr-x  13 root root  4096 Jun 11 23:38 usr
drwxr-xr-x  19 root root  4096 Jun 11 23:38 var
```

10. ls -lh 将文件大小以更好的可读性显示出来。

```
[root@localhost /]# ls -lh
total 254K
drwxr-xr-x   2 root root 4.0K Jun 12 04:03 bin
drwxr-xr-x   4 root root 1.0K Jun 15 14:45 boot
drwxr-xr-x   6 root root 4.0K Jun 12 10:26 data
drwxr-xr-x  10 root root 3.5K Sep 26 15:38 dev
drwxr-xr-x  75 root root 4.0K Oct 16 04:02 etc
drwxr-xr-x   4 root root 4.0K Jun 12 10:26 home
drwxr-xr-x  14 root root  12K Jun 16 04:02 lib
drwx------   2 root root  16K Jun 11 22:46 lost+found
drwxr-xr-x   2 root root 4.0K May 11  2011 media
drwxr-xr-x   2 root root 4.0K Nov  8  2010 misc
drwxr-xr-x   2 root root 4.0K May 11  2011 mnt
drwxr-xr-x   2 root root 4.0K May 11  2011 opt
dr-xr-xr-x 235 root root    0 Jun 15 11:04 proc
drwxr-x---   4 root root 4.0K Oct 15 14:43 root
drwxr-xr-x   2 root root  12K Jun 12 04:03 sbin
drwxr-xr-x   2 root root 4.0K May 11  2011 selinux
drwxr-xr-x   2 root root 4.0K May 11  2011 srv
drwxr-xr-x  11 root root    0 Jun 15 11:04 sys
drwxrwxrwt   3 root root  96K Oct 16 08:49 tmp
drwxr-xr-x  13 root root 4.0K Jun 11 23:38 usr
drwxr-xr-x  19 root root 4.0K Jun 11 23:38 var
```

11. ls -ld 仅显示目录的信息。

```
[root@localhost /]# ls -ld /etc/
drwxr-xr-x 75 root root 4096 Oct 16 04:02 /etc/
```

12. ls -lt 按 mtime 列出文件和目录的详细信息。最近修改的文件的在前面。

```
[root@localhost /]# ls -lt
total 254
drwxrwxrwt   3 root root 98304 Oct 16 08:53 tmp
drwxr-xr-x  75 root root  4096 Oct 16 04:02 etc
drwxr-x---   4 root root  4096 Oct 15 14:43 root
drwxr-xr-x  10 root root  3520 Sep 26 15:38 dev
drwxr-xr-x  14 root root 12288 Jun 16 04:02 lib
drwxr-xr-x   4 root root  1024 Jun 15 14:45 boot
drwxr-xr-x  11 root root     0 Jun 15 11:04 sys
dr-xr-xr-x 232 root root     0 Jun 15 11:04 proc
drwxr-xr-x   6 root root  4096 Jun 12 10:26 data
drwxr-xr-x   4 root root  4096 Jun 12 10:26 home
drwxr-xr-x   2 root root  4096 Jun 12 04:03 bin
drwxr-xr-x   2 root root 12288 Jun 12 04:03 sbin
drwxr-xr-x  13 root root  4096 Jun 11 23:38 usr
drwxr-xr-x  19 root root  4096 Jun 11 23:38 var
drwx------   2 root root 16384 Jun 11 22:46 lost+found
drwxr-xr-x   2 root root  4096 May 11  2011 media
drwxr-xr-x   2 root root  4096 May 11  2011 mnt
drwxr-xr-x   2 root root  4096 May 11  2011 opt
drwxr-xr-x   2 root root  4096 May 11  2011 selinux
drwxr-xr-x   2 root root  4096 May 11  2011 srv
drwxr-xr-x   2 root root  4096 Nov  8  2010 misc

```

13. ls -ltr 按最近修改时间的逆序列出文件和目录的详细信息。

```
[root@localhost /]# ls -ltr
total 254
drwxr-xr-x   2 root root  4096 Nov  8  2010 misc
drwxr-xr-x   2 root root  4096 May 11  2011 srv
drwxr-xr-x   2 root root  4096 May 11  2011 selinux
drwxr-xr-x   2 root root  4096 May 11  2011 opt
drwxr-xr-x   2 root root  4096 May 11  2011 mnt
drwxr-xr-x   2 root root  4096 May 11  2011 media
drwx------   2 root root 16384 Jun 11 22:46 lost+found
drwxr-xr-x  19 root root  4096 Jun 11 23:38 var
drwxr-xr-x  13 root root  4096 Jun 11 23:38 usr
drwxr-xr-x   2 root root 12288 Jun 12 04:03 sbin
drwxr-xr-x   2 root root  4096 Jun 12 04:03 bin
drwxr-xr-x   4 root root  4096 Jun 12 10:26 home
drwxr-xr-x   6 root root  4096 Jun 12 10:26 data
dr-xr-xr-x 232 root root     0 Jun 15 11:04 proc
drwxr-xr-x  11 root root     0 Jun 15 11:04 sys
drwxr-xr-x   4 root root  1024 Jun 15 14:45 boot
drwxr-xr-x  14 root root 12288 Jun 16 04:02 lib
drwxr-xr-x  10 root root  3520 Sep 26 15:38 dev
drwxr-x---   4 root root  4096 Oct 15 14:43 root
drwxr-xr-x  75 root root  4096 Oct 16 04:02 etc
drwxrwxrwt   3 root root 98304 Oct 16 08:54 tmp

```

14. ls -F 按照特殊字符对文件进行分类。

```
[root@localhost nginx-1.2.1]# ls -F
auto/  CHANGES  CHANGES.ru  conf/  configure*  contrib/  html/  LICENSE  Makefile  man/  objs/  README  src/
```

15. ls --color=auto 列出文件并标记颜色分类。蓝色表示目录，绿色表示可执行文件，红色表示压缩文件，浅蓝色表示链接文件，灰色表示其他类型的文件。

```
[root@localhost nginx-1.2.1]# ls --color=auto
auto  CHANGES  CHANGES.ru  conf  configure  contrib  html  LICENSE  Makefile  man  objs  README  src
```

16. 使用占位符来过滤文件列表。其中，问号（?）代表一个字符，星号（*）代表零个或多个字符，中括号（[]）可以进行范围匹配，感叹号（！）可以进行排除匹配。

```shell
[vincent@localhost package]$ ls -l redis-3.2.9.???.gz
-rwx--x--x 1 root root 1547695 Jun 17  2017 redis-3.2.9.tar.gz
[vincent@localhost package]$ ls -l *.gz
-rwxr----x 1 vincent vincent 9393241 Jun  8  2017 apache-tomcat-8.5.15.tar.gz
-rwx--x--x 1 root    root    1547695 Jun 17  2017 redis-3.2.9.tar.gz
[vincent@localhost package]$ ls -l test0[1-3]
-rw-rw-r-- 1 vincent vincent 0 Jan  1 10:38 test01
-rw-rw-r-- 1 vincent vincent 0 Jan  1 10:38 test02
-rw-rw-r-- 1 vincent vincent 0 Jan  1 10:38 test03
[vincent@localhost package]$ ls -l test0[!1]
-rw-rw-r-- 1 vincent vincent 0 Jan  1 10:38 test02
-rw-rw-r-- 1 vincent vincent 0 Jan  1 10:38 test03
[vincent@localhost package]$ 
```

ls -|*|grep "^-"| wc -|

### touch 命令

#### 描述

**touch 命令**有两个功能：

1. 修改文件最后访问时间和最后修改时间（同时会改变状态时间），但文件的内容将不会改变；
2. 用于创建新新的空文件（应用最多）。

先介绍以下 Linux 下文件的几种时间。

1. access time（atime，访问时间）：当读取文件内容或执行文件时，就会更改这个时间，例如使用 cat 去读取 /etc/man.config，那么该文件的 atime 就会改变；
2. modification time（mtime，修改时间）：这个时间指的是文件**内容修改的时间，而不是文件属性的修改时间**。当数据内容修改时，这个时间就会改变，用命令 ls -l 默认显示的就是这个时间；
3. status time（ctime，状态时间）：当文件的内容、所有者、权限或链接设置等**文件状态改变**时，这个时间就会改变。不过要注意的是，即使复制一个文件并复制所有属性也没有办法复制 ctime 属性。

> 文件的时间很重要，因为如果误判文件时间，可能会造成某些程序无法正常运行。

#### 语法

```
touch [OPTION]... [FILE]... 
```

##### 选项

```
-a：只更改访问时间（atime）；
-c 或 --no-create：如果指定的文件不存在，不创建这些不存在的文件；
-d 或 --date=STRING： 将 atime 和 mtime 修改为指定STRING字符串表示的时间，但 ctime 不会改变；
-f：此参数将忽略不予处理，仅负责解决BSD版本 touch 指令的兼容性问题；
-m：只更该修改时间（mtime）；
-r 或 --reference=FILE：把指定文件或目录的日期时间统统设成和参考文件或目录的日期时间相同；
-t 时间戳：使用[[CC]YY]MMDDhhmm[.ss]格式的时间戳替代当前时间；
--time=WORD：使用WORD指定的时间类型，WORD可以为：access、atime、use（都等于-a选项的效果），modify、mtime（都等于-m 选项的效果）；
--help：在线帮助；
--version：显示版本信息。
```

> 注意：
>
> - -d 或 --date 选项后面的时间日期字符串可以是一种具有一定阅读性时间日期描述，比如“Sun, 29 Feb 2004 16:21:42 -0800“、“2004-02-29 16:21:42”，甚至“next Thursday”、“2 days ago”等。该字符串可以包含日历上的日期、一天中的几点、时区、周几、相对时间、相对日期、以及数字等。
> - -t 选项后面的时间戳格式中 CC 为年数中的前两位，即”世纪数”； YY 为年数的后两位，即某世纪中的年数．如果不给出 CC 的值，则 touch   将把年数CCYY限定在 1969--2068 之内．MM 为月数，DD 为天将把年数 CCYY 限定在 1969--2068 之内．MM 为月数，DD 为天数，hh 为小时数(几点)，mm 为分钟数，SS 为秒数．此处秒的设定范围是 0--61，这样可以处理闰秒．这些数字组成的时间是环境变量 TZ 指定的时区中的一个时间．由于系统的限制，早于 1970 年 1 月 1 日的时间是错误的。

##### 参数

文件：指定要设置时间属性的文件**列表**。

#### 实例

1. touch 命令直接跟一个不存在的文件名就会创建该指定名称的空文件（大小是零），并**将你的用户名作为文件的属主**。

```shell
[vincent@localhost testdir]$ touch test01 #创建一个空文件
[vincent@localhost testdir]$ ls -l #查看以创建的空文件
total 0
-rw-rw-r--. 1 vincent vincent 0 Dec 30 21:18 test01
[vincent@localhost testdir]$ stat test01 #使用 stat 命令查看文件的详细信息
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 21:18:21.102817751 +0800
Modify: 2017-12-30 21:18:21.102817751 +0800
Change: 2017-12-30 21:18:21.102817751 +0800
 Birth: -
[vincent@localhost testdir]$ 
```

1. 使用 touch 命令的**无选项**形式会同时更新已存在文件的 atime、mtime 和 ctime 为系统的当前时间。 

```shell
[vincent@localhost testdir]$ touch test01
[vincent@localhost testdir]$ ls -l
total 0
-rw-rw-r--. 1 vincent vincent 0 Dec 30 21:18 test01
[vincent@localhost testdir]$ stat test01 
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 21:18:21.102817751 +0800
Modify: 2017-12-30 21:18:21.102817751 +0800
Change: 2017-12-30 21:18:21.102817751 +0800
 Birth: -
#对已存在文件执行 touch 的无选项形式会更新已存在文件的修改时间、访问时间和状态时间
[vincent@localhost testdir]$ touch test01 
[vincent@localhost testdir]$ stat test01 
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 21:45:09.313783434 +0800
Modify: 2017-12-30 21:45:09.313783434 +0800
Change: 2017-12-30 21:45:09.313783434 +0800
 Birth: -
#也可以同时使用 ls 命令的 -l、--full-time、--time=WORD 选项来查看文件的某种时间
[vincent@localhost testdir]$ ls -l --full-time test01 #查看文件的最近修改时间
-rw-rw-r--. 1 vincent vincent 0 2017-12-30 21:45:09.313783434 +0800 test01
[vincent@localhost testdir]$ ls -l --full-time --time=atime test01 #查看文件的上次访问时间
-rw-rw-r--. 1 vincent vincent 0 2017-12-30 21:45:09.313783434 +0800 test01
[vincent@localhost testdir]$ ls -l --full-time --time=ctime test01 #查看文件的状态改变时间
-rw-rw-r--. 1 vincent vincent 0 2017-12-30 21:45:09.313783434 +0800 test01
[vincent@localhost testdir]$ 
```

1. 可用 -a 选项改变文件的 atime。该选项不会改变文件的 mtime，而文件的 ctime 将会变为执行这条命令时的系统时间。

```shell
[vincent@localhost testdir]$ stat test01 
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 21:45:09.313783434 +0800
Modify: 2017-12-30 21:45:09.313783434 +0800
Change: 2017-12-30 21:45:09.313783434 +0800
 Birth: -
#使用 -a 选项会改变 atime 和 ctime，不会改变 mtime
[vincent@localhost testdir]$ touch -a test01 
[vincent@localhost testdir]$ stat test01
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 21:57:10.137768053 +0800
Modify: 2017-12-30 21:45:09.313783434 +0800
Change: 2017-12-30 21:57:10.137768053 +0800
 Birth: -
[vincent@localhost testdir]$ 
```

1. 可用 -d 选项修改文件的 atime 和 mtime 为指定的时间，而文件的 ctime 将会变为执行这条命令时的系统时间。

```shell
[vincent@localhost testdir]$ stat test01 
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 21:18:21.102817751 +0800
Modify: 2017-12-30 21:18:21.102817751 +0800
Change: 2017-12-30 21:18:21.102817751 +0800
 Birth: -
#使用 -d 选项会改变文件的 atime 和 atime，而文件的 ctime 变为执行这条命令的时间
[vincent@localhost testdir]$ touch -d '2 days ago' test01 
[vincent@localhost testdir]$ stat test01 
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-28 21:43:53.350836009 +0800
Modify: 2017-12-28 21:43:53.350836009 +0800
Change: 2017-12-30 21:43:53.349785055 +0800
 Birth: -
[vincent@localhost testdir]$ 
```

1. 可用 -m 选项改变文件的 mtime。该选项不会改变文件的 atime，而文件的 ctime  将会变为执行这条命令时的系统时间。

```shell
[vincent@localhost testdir]$ stat test01
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 21:57:10.137768053 +0800
Modify: 2017-12-30 21:45:09.313783434 +0800
Change: 2017-12-30 21:57:10.137768053 +0800
 Birth: -
#使用 -m 选项会改变 mtime 和 ctime，不会改变 atime
[vincent@localhost testdir]$ touch -m test01 
[vincent@localhost testdir]$ stat test01 
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 21:57:10.137768053 +0800
Modify: 2017-12-30 21:59:07.080765557 +0800
Change: 2017-12-30 21:59:07.080765557 +0800
 Birth: -
[vincent@localhost testdir]$ 
```

1. 可用 -r 选项指定一个文件的 atime 和 mtime 与参考文件相同，该文件的 ctime 将会变为执行这条命令时的系统时间。

```shell
#新建一个空文件 test02
[vincent@localhost testdir]$ touch test02
#查看 test01 和 test02 这两个文件的信息
[vincent@localhost testdir]$ stat *
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 21:57:10.137768053 +0800
Modify: 2017-12-30 21:59:07.080765557 +0800
Change: 2017-12-30 21:59:07.080765557 +0800
 Birth: -
  File: ‘test02’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 166216      Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 22:07:06.671755323 +0800
Modify: 2017-12-30 22:07:06.671755323 +0800
Change: 2017-12-30 22:07:06.671755323 +0800
 Birth: -
#指定文件 test01 的 与文件 test02相同
[vincent@localhost testdir]$ touch -r test02 test01
#查看文件 test01 修改后的信息。发现文件 test01 的 atime 和 mtime 与文件 test02 相同， 
#而文件 test01 的ctime 变为了执行 touch -r test02 test01 命令的时间
[vincent@localhost testdir]$ stat *
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 22:07:06.671755323 +0800
Modify: 2017-12-30 22:07:06.671755323 +0800
Change: 2017-12-30 22:07:31.486754794 +0800
 Birth: -
  File: ‘test02’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 166216      Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 22:07:06.671755323 +0800
Modify: 2017-12-30 22:07:06.671755323 +0800
Change: 2017-12-30 22:07:06.671755323 +0800
 Birth: -
[vincent@localhost testdir]$ 
```

1. 可用 -t 选项加时间来指定文件的 atime 和 mtime，而文件的 ctime 也会变为执行这条命令时的系统时间。

```shell
[vincent@localhost testdir]$ stat test01
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-30 22:07:06.671755323 +0800
Modify: 2017-12-30 22:07:06.671755323 +0800
Change: 2017-12-30 22:07:31.486754794 +0800
 Birth: -
[vincent@localhost testdir]$ touch -t 201712310000.30 test01
[vincent@localhost testdir]$ stat test01
  File: ‘test01’
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d	Inode: 7122587     Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/ vincent)   Gid: ( 1000/ vincent)
Context: unconfined_u:object_r:user_home_t:s0
Access: 2017-12-31 00:00:30.000000000 +0800
Modify: 2017-12-31 00:00:30.000000000 +0800
Change: 2017-12-30 22:18:08.500741201 +0800
 Birth: -
[vincent@localhost testdir]$ 
```

### cd 命令

#### 描述

**cd 命令**用来切换工作目录（change working directory）到指定的 dirName 中。 其中 dirName 表示法可为绝对路径或相对路径。若目录名称省略，则变换至当前用户的 home 目录。另外，~ 也表示为 home 目录，. 则表示当前工作目录，.. 则表示当前工作目录的上一层目录。

#### 语法

```
cd [OPTION]... DIRECTORY
```

##### 选项

```
-p：如果要切换到的目标目录是一个符号连接，直接切换到符号连接指向的目标目录；
-L：如果要切换到的目标目录是一个符号连接，直接切换到字符连接名代表的目录，而非符号连接所指向的目标目录；
-：当仅实用"-"一个选项时，当前工作目录将被切换到环境变量"OLDPWD"所表示的目录（即上一个刚使用过的目录）。
```

##### 参数

要切换到的目标目录。

#### 实例

```
cd    进入用户主目录；
cd ~  进入用户主目录；
cd -  返回进入此目录之前所在的目录。方便在两个目录之间进行切换；
cd ..  返回上级目录（若当前目录为“/“，则执行完后还在“/"；".."为上级目录的意思）；
cd ../..  返回上两级目录；
cd !$  把上个命令的选项作为cd参数使用。
```

### cp 命令

#### 描述

**cp 命令**将源文件复制至目标文件，或将多个源文件复制至目标目录。**当一次复制多个文件时，目标文件参数必须是一个已经存在的目录**，否则将出现错误。

#### 语法

```
cp [OPTION]... [-T] SOURCE DEST
or:  cp [OPTION]... SOURCE... DIRECTORY
or:  cp [OPTION]... -t DIRECTORY SOURCE...
```

##### 选项

```
-a, --archive：效果等同于同时指定 -dpR（或 -dR --preserve=all）；
--backup[=CONTROL]：为每个已存在的目标文件创建备份；
-b:类似 --backup 但不接受参数;
--copy-contents:递归复制时复制特殊文件的内容；
-d：当复制符号连接时，把目标文件或目录也建立为符号连接，并指向与源文件或目录连接的原始文件或目录。等于--no-dereference --preserve=links；
-f：在如果目标文件无法打开（不是目录）则将其移除并重试(当 -n 选项存在时则不需再选此项)；
-i, --interactive：覆盖既有文件之前先询问用户；
-H：跟随源文件中的命令行符号链接；
-l, --link：对源文件建立硬连接，而非复制文件；
-L, --dereference：总是跟随符号链接；
-n, --no-clobber：不要覆盖已存在的文件(使前面的 -i 选项失效)；
-P, --no-dereference：不跟随源文件中的符号链接；
-p：等于--preserve=mode,ownership,timestamps；
--preserve[=属性列表]：保持指定的属性(默认：mode,ownership,timestamps)，如果可能的话就保持附加属性：context, links, xattr, all等；
-R, -r, --recursive：递归复制目录及目录内的所有项目；
-s, --symbolic-link：对源文件建立符号连接，而非复制文件；
-S, --suffix=SUFFIX：在备份文件时，用指定的后缀“SUFFIX”代替文件的默认后缀；
-t, --target-directory=DIRECTORY：将所有的源（SOURCE）参数复制到DIRECTORY中；
-T, --no-target-directory：将目标（DEST）参数当成是一个普通文件。
-u, --update：只会在源文件的更改时间比目标文件新时或是名称相互对应的目标文件并不存在时，才复制文件；
-b：覆盖已存在的文件目标前将目标文件备份；
-v：详细显示命令执行的操作。
```

##### 参数

- 源：指定源文件列表。**默认情况下，cp 命令不能复制目录，如果要复制目录，则必须使用 -R 选项**；
- 目标：指定目标文件，用于复制单个文件。**当“源文件”为多个文件时，要求“目标文件”为指定的目录**；
- 目录：指定要将源文件列表复制到的目录。

#### 实例

1. 将指定文件复制到当前目录下：

```
cp ../mary/homework/assign .
```

2. 将文件 file 复制到目录 /usr/men/tmp 下，并改名为 file1。

```
cp file /usr/men/tmp/file1
```

3. 将目录 /usr/men 下的所有文件及其子目录复制到目录 /usr/zh 中。

```
cp -r /usr/men /usr/zh
```

4. 交互式地将目录 /usr/men 中的以m打头的所有 .c 文件复制到目录 /usr/zh 中。

```
cp -i /usr/men m*.c /usr/zh
```

使用 cp 命令复制文件时候，有时候会需要覆盖一些同名文件，覆盖文件的时候都会有提示：需要不停的按 Y 来确定执行覆盖。文件数量不多还好，但是要是几百个估计按 Y 都要吐血了，于是折腾来半天总结了一个方法：

```shell
#复制目录 aaa 下所有到 /bbb 目录下，这时如果 /bbb 目录下有和 aaa 同名的文件，需要按Y来确认并且会略过 aaa 目录下的子目录。
cp aaa/* /bbb

#这次依然需要按 Y 来确认操作，但是没有忽略子目录。
cp -r aaa/* /bbb

#依然需要按 Y 来确认操作，并且把 aaa 目录以及子目录和文件属性也传递到了 /bbb。
cp -r -a aaa/* /bbb

#成功，没有提示按 Y、传递了目录属性、没有略过目录。
\cp -r -a aaa/* /bbb 
```

### ln 命令

**ln 命令**用来为文件创建链接文件。

### 扩展知识

Linux具有为一个文件起多个名字的功能，称为链接（Link）。被链接的文件可以存放在相同的目录下，但是必须有不同的文件名。被链接的文件也可以有相同的文件名，但是存放在不同的目录下。**只要对一个链接文件进行修改，所有关联文件都会同步这种变化**。对于某个文件的各链接文件，我们可以给它们指定不同的存取权限，以控制对信息的共享和增强安全性（针对硬链接）。

链接文件类型分为硬链接（Hard Link）和符号链接（Symbolic Link）两种。使用 ln 命令创建的默认链接类型是硬链接。

##### 硬链接

硬链接会创建独立的虚拟文件，其中包含了原始文件的信息及位置。**硬链接和其源文件从根本上而言是同一个文件，它们的 lnode 节点号相同**。引用硬链接文件等同于引用了源文件。要创建硬链接，原始文件也必须事先存在。

一个文件的硬链接数可以在目录的长列表格式的第二列中看到，无额外链接的文件的链接数为 1。在默认情况下，ln 命令创建硬链接。ln 命令会增加链接数，rm 命令会减少链接数。一个文件除非链接数为 0，否则不会从文件系统中被物理地删除。

> 使用 ls -li 命令可以看到链接文件的 lnode 节点号和链接数。

对硬链接有如下限制：

- **不能对目录做硬链接**。
- **不能在不同的文件系统之间做硬链接**。就是说，链接文件和被链接文件必须位于同一个文件系统中。

##### 符号链接

符号链接也称为软链接，是将一个路径名链接到一个文件。符号链接文件是一种特别类型的文件。事实上，它只是一个文本文件，其中包含它所链接的另一个文件的路径名。所有读、写文件内容的命令被用于符号链接时，将沿着链接方向前进来访问实际的文件。符号链接文件不是一个独立的文件，它的许多属性依赖于源文件，所以**给符号链接文件设置存取权限是没有意义的**。

**与硬链接不同的是，符号链接是一个新文件，它和其源文件具有不同的 lnode 节点号**。符号链接没有硬链接的限制，可以对目录做符号链接，也可以在不同文件系统之间做符号链接。

用 ln  命令的 -s 选项可以建立符号链接。建立符号链接时源文件最好用绝对路径名，这样可以在任何工作目录下进行符号链接。而当源文件用相对路径时，如果当前的工作路径与要创建的符号链接文件所在路径不同，就不能进行链接。

符号链接文件与其所链接文件的区别：

- 删除符号链接所链接文件，只是删除了文件数据，而不会删除其符号链接。一旦以同样文件名创建了源文件，原有的符号链接将继续指向该文件的新数据。
- 在目录长列表中，符号链接作为一种特殊的文件类型显示出来，其第一个字母是 l。由于符号链接是一个新的文件，所以其 lnode 编号与其所链接文件不同 。符号链接的大小是其所链接文件的路径名中的字节数。
- **当用 ls -l 命令列出文件长列表时，可以看到符号链接名后有一个箭头指向其所链接文件**。

#### 语法

```
ln [OPTION]... [-T] TARGET LINK_NAME   		  (1st form)
or:  ln [OPTION]... TARGET                  (2nd form)
or:  ln [OPTION]... TARGET... DIRECTORY     (3rd form)
or:  ln [OPTION]... -t DIRECTORY TARGET...  (4th form)
```

##### 选项

```
--backup[=CONTROL]：若需覆盖文件，则覆盖前先行备份。CONTROL指定备份模式；
-b：和 --backup 一样，但不接受参数；
-d，-F，——directory：建立目录的硬连接(只适用于超级用户，而且有不可预知的风险，慎用)；
-f，——force：强行建立文件或目录的连接，不论所链接文件是否存在；
-i，——interactive：覆盖既有文件之前先询问用户；
-n，--no-dereference：如果目标目录已经是一个符号链接了，那么把 LINK_NAME 视为一般文件；
-s，——symbolic：对源文件建立符号连接，而非硬连接；
-S, --suffix=SUFFIX：用"-b"参数备份目标文件后，备份文件的字尾会被加上一个备份字符串，预设的备份字符串是符号“~”，用户可通过“-S”参数来改变它。形式为 -S<字尾备份字符串>或--suffix=<字尾备份字符串>；
-t, --target-directory=DIRECTORY：在指定目录中创建链接；
-T, --no-target-directory：总是将 LINK_NAME 视为一般文件；
-v，——verbose：显示指令执行过程；
```

##### 参数

- 第一种形式为目标（TARGET）创建名为 LINK_NAME 的链接；
- 第二种形式在当前目录下为目标（TARGET）创建链接；
- 第三种形式和第四种形式为 DIRECTORY 中的每个 TARGET 创建一个链接；

- TARGET 可以是文件或者目录。

#### 实例

1. ln -s 为一个文件创建符号链接。符号链接的文件类型标识为 l，长列表中符号链接名后有一个 -> 符号指向其所链接的文件。可以看出符号链接的 lnode 编号与 其所链接的文件不同。

```
[vincent@localhost testdir01]$ ls -l test01
-rw-rw-r-- 1 vincent vincent 0 Dec 31 23:19 test01
[vincent@localhost testdir01]$ ln -s test01 sl_test01
[vincent@localhost testdir01]$ ls -li *test01
2458532 lrwxrwxrwx 1 vincent vincent 6 Jan  1 12:29 sl_test01 -> test01
2458523 -rw-rw-r-- 1 vincent vincent 0 Dec 31 23:19 test01
[vincent@localhost testdir01]$ 
```

2. ln 无选项形式为一个文件创建硬链接。硬链接的 lnode 编号（第一列）与其所链接的文件相同，两者的大小、链接数（第三列）也相同。

```shell
[vincent@localhost testdir01]$ ls -l *test01
lrwxrwxrwx 1 vincent vincent 6 Jan  1 12:29 sl_test01 -> test01
-rw-rw-r-- 1 vincent vincent 0 Dec 31 23:19 test01
[vincent@localhost testdir01]$ ln test01 hl_test01
[vincent@localhost testdir01]$ ls -li *test01
2458523 -rw-rw-r-- 2 vincent vincent 0 Dec 31 23:19 hl_test01
2458532 lrwxrwxrwx 1 vincent vincent 6 Jan  1 12:29 sl_test01 -> test01
2458523 -rw-rw-r-- 2 vincent vincent 0 Dec 31 23:19 test01
[vincent@localhost testdir01]$ 
```

如果使用 cp 命令的无选项形式复制一个文件，而该文件又已经被链接到了另一个源文件上，那么得到的其实是源文件的一个副本。千万别创建软链接文件的软链接。这会形成混乱的链接链，不仅容易断裂，还会造成各种麻烦。 

### mv 命令

#### 描述

**mv 命令**可以将文件和目录移动到另一个位置或重新命名。文件的时间戳和 lnode 编号都没有改变。改变的只有位置和名称。

#### 语法

```shell
 mv [OPTION]... [-T] SOURCE DEST
 or:  mv [OPTION]... SOURCE... DIRECTORY
 or:  mv [OPTION]... -t DIRECTORY SOURCE...
```

将 SOURCE 重命名为 DEST，或者将 SOURCE 移动到 DIRECTORY 中。

##### 选项

```
--backup[=CONTROL]：若需覆盖文件，则覆盖前先行备份。CONTROL指定备份模式；
-b：和 --backup 一样，但不接受参数；
-f, --force：若目标文件或目录与现有的文件或目录重复，则直接覆盖现有的文件或目录；
-i, --interactive：交互式操作，覆盖前先行询问用户，如果源文件与目标文件或目标目录中的文件同名，则询问用户是否覆盖目标文件。用户输入”y”，表示将覆盖目标文件；输入”n”，表示取消对源文件的移动。这样可以避免误将文件覆盖。
--strip-trailing-slashes：删除源文件名后面的斜杠“/”；
-S, --suffix=SUFFIX：为备份文件指定 SUFFIX 后缀，而不使用默认的 ~ 后缀；
-t, --target-directory=DIRECTORY：指定源文件要移动到目标目录；
-u, --update：当源文件比目标文件新或者目标文件不存在时，才执行移动操作。
```

##### 参数

- SOURCE：源文件列表；
- DEST：要改成的的目标文件名；
- DIRECTORY：该移动到的目标目录名。

#### 实例

1. 将文件ex3改名为new1

```shell
mv ex3 new1
```

2. 将目录 /usr/men 中的所有文件移到当前目录（用 . 表示）中：

```shell
mv /usr/men/* .
```

3. 也可以使用mv命令移动文件位置并修改文件名称，这些操作只需一步就能完成。

```shell
[vincent@localhost testdir01]$ ls -l test01
-rw-rw-r-- 2 vincent vincent 0 Dec 31 23:19 test01
[vincent@localhost testdir01]$ mv test01 ../testdir02/test01_mv
[vincent@localhost testdir01]$ ls -l ../testdir02/test01_mv
-rw-rw-r-- 2 vincent vincent 0 Dec 31 23:19 ../testdir02/test01_mv
[vincent@localhost testdir01]$ 
```

### rm 命令

#### 描述

**rm 命令**可以删除一个目录中的一个或多个文件或子目录，也可以将某个目录及其中的所有文件及其子目录均删除掉。对于链接文件，只是删除整个链接文件，而原有文件保持不变。

注意：使用 rm 命令要格外小心。因为一旦删除了一个文件，就无法再恢复它。所以，在删除文件之前，最好再看一下文件的内容，确定是否真要删除。rm 命令可以用 -i 选项，这个选项在使用文件扩展名字符删除多个文件时特别有用。使用这个选项，系统会要求你逐一确定是否要删除。这时，必须输入 y 并按 Enter 键，才能删除文件。

#### 语法

```
rm [OPTION]... FILE...
```

##### 选项

```
-d, --dir：删除空目录；
-f, --force：强制删除文件或目录。不给出任何提示，即使文件不存在；
-i：在删除每个文件或目录之前先询问用户；
-I：在删除之前仅提示一次；
--interactive[=WHEN]：指定在删除之前的提示类型。WHEN可以为once（等同-I），或 always（等同-i），没有 WHEN 时总是给出提示；
-r, -R, --recursive：递归处理，将指定目录下的所有文件与子目录一并处理；
--preserve-root：不对根目录进行递归操作；
-v：显示指令的详细执行过程。
```

##### 参数

- FILE：指定被删除的文件列表，如果参数中含有非空目录，则必须加上 -r 或者 -R 选项。如果是空目录，则使用 -d 选项。

#### 实例

1. 交互式删除当前目录下的文件 test 和 example。

```
rm -i test example
Remove test ?n（不删除文件test)
Remove example ?y（删除文件example)
```

2. 删除当前目录下除隐含文件外的所有文件和子目录（非常危险！）

```
rm -r *
```

### mkdir 命令

#### 描述

**mkdir 命令**用来创建目录。如果在指定名称的目录的前面没有加任何路径名，则在当前目录下创建指定名称的目录；如果指定名称的目录前面有路径，将会在指定路径下创建指定名称的目录。在创建目录时，应保证新建的目录与它所在目录下的文件没有重名。 

**最好采用前后一致的命名方式来区分文件和目录**。例如，**目录名可以以大写字母开头，这样，在目录列表中目录名就出现在前面**。

#### 语法

```
mkdir [OPTION]... DIRECTORY...
```

##### 选项

```
-m, --mode=MODE：建立目录的同时设置目录的权限（rwx）；
-p, --parents：若所要建立目录的上层目录目前尚未建立，则会一并建立上层目录；
```

#### 实例

1. 创建目录。

```shell
[vincent@localhost testdir01]$ mkdir TestDir
[vincent@localhost testdir01]$ ls -l -d TestDir
drwxrwxr-x 2 vincent vincent 4096 Jan  1 13:52 TestDir
[vincent@localhost testdir01]$ 
```

2. 创建多级目录。

```shell
[vincent@localhost testdir01]$ mkdir Level01/Level02/TestDir
mkdir: cannot create directory ‘Level01/Level02/TestDir’: No such file or directory
[vincent@localhost testdir01]$ mkdir -p Level01/Level02/TestDir
[vincent@localhost testdir01]$ ls -l -d Level01/Level02/TestDir/
drwxrwxr-x 2 vincent vincent 4096 Jan  1 13:54 Level01/Level02/TestDir/
[vincent@localhost testdir01]$ 
```

### rmdir 命令

#### 描述

**rmdir 命令**用来删除**空目录**。要删除目录中的所有文件必须先用 rm 命令全部删除。另外，当前工作目录必须在被删除目录之上，不能是被删除目录本身，也不能是被删除目录的子目录。

该命令功能可用 rm 命令的 -d 选项替代。

#### 语法

```
rmdir [OPTION]... DIRECTORY...
```

##### 选项

```
-p, --parents：删除指定目录后，若该目录的上层目录已变成空目录，则将其一并删除；
--ignore-fail-on-non-empty：使 rmdir 命令忽略由于删除非空目录时导致的错误信息；
```

##### 参数

DIRECTORY：要删除的空目录列表。当删除多个空目录时，目录名之间使用空格隔开。

#### 实例

只能删除非空目录

```
[root@localhost testdir01]# tree Level01
Level01
└── Level02
    └── TestDir
        └── test03

2 directories, 1 file
[root@localhost testdir01]# rmdir Level01/Level02/TestDir
rmdir: failed to remove ‘Level01/Level02/TestDir’: Directory not empty
[root@localhost testdir01]# rm Level01/Level02/TestDir/test03 
rm: remove regular empty file ‘Level01/Level02/TestDir/test03’? y
[root@localhost testdir01]# rmdir Level01/Level02/TestDir
[root@localhost testdir01]# tree Level01
Level01
└── Level02

1 directory, 0 files
[root@localhost testdir01]# rmdir -p Level01/Level02
[root@localhost testdir01]# tree
.

0 directories, 0 files
[root@localhost testdir01]# 
```

### file 命令

#### 描述

**file 命令**用来探测给定文件的类型。file 命令对文件的检查分为文件系统、魔法幻数检查和语言检查3个过程。

#### 语法

```
file [OPTION...] [FILE...]
```

##### 选项

```
-b, --brief：列出辨识结果时，不显示文件名称；
-c, --checking-printout：详细显示指令执行过程，便于排错或分析程序执行的情形；
-f, --files-from FILE：指定名称文件，其内容有一个或多个文件名称时，让 file 依序辨识这些文件，格式为每列一个文件名称；
-L, --dereference：跟随符号链接。即直接显示符号连接所指向的文件类别；
-h, --no-dereference：不跟随符号链接；
-m, --magic-file LIST：使用冒号分隔的列表来指定魔法数字文件。
```

##### 参数

FILE：要确定类型的文件列表，多个文件之间使用空格分开，可以使用 shell 通配符匹配多个文件。

#### 实例

1. 显示文件类型。

```shell
[root@localhost ~]# file install.log
install.log: UTF-8 Unicode text
[root@localhost ~]# file -b install.log      #不显示文件名称
UTF-8 Unicode text
[root@localhost ~]# file -i install.log      #显示MIME类别。
install.log: text/plain; charset=utf-8
[root@localhost ~]# file -b -i install.log
text/plain; charset=utf-8
```

2. 显示符号链接的文件类型。

```shell
[root@localhost ~]# ls -l /var/mail
lrwxrwxrwx 1 root root 10 08-13 00:11 /var/mail -> spool/mail
[root@localhost ~]# file /var/mail
/var/mail: symbolic link to `spool/mail'
[root@localhost ~]# file -L /var/mail
/var/mail: directory
[root@localhost ~]# file /var/spool/mail
/var/spool/mail: directory
[root@localhost ~]# file -L /var/spool/mail
/var/spool/mail: directory
```

### cat 命令

**cat 命令**拼接文本文件内容，并打印到标准输出设备上。cat 命令经常用来显示文件的内容，类似于下的 type 命令。

#### 语法

```
cat [OPTION]... [FILE]...
```

##### 选项

```
-n, --number：从1开始对所有输出的行数编号；
-b, --number-nonblank：和 -n 相似，只不过对于空白行不编号；
-s或--squeeze-blank：当遇到有连续两行以上的空白行，就代换为一行的空白行；
-A：显示不可打印字符，行尾显示“$”；
-T, --show-tabs：将文本内容中的制表符 TAB 以 ^I 替代显示；
-E, --show-ends：在文件末尾显示 $;
-v, --show-nonprinting：除了 LFD 和 TAB 依赖，使用 ^ 和 M- 符号；
-e：等价于"-vE"选项；
-t：等价于"-vT"选项；
```

##### 参数

FILE：指定要拼接的文件列表。

#### 实例

显示文本内容和拼接显示多个文本的内容。

```
[root@localhost testdir01]# cat test01
this is text in test01 file.
[root@localhost testdir01]# cat test02
 this is text in test02 file.
[root@localhost testdir01]# cat test01 test02 > test03
[root@localhost testdir01]# cat test03
this is text in test01 file.
 this is text in test02 file.
[root@Mr testdir01]# cat -n test03
     1	this is text in test01 file.
     2	 this is text in test02 file.
[root@Mr testdir01]# 
```

### more 命令

#### 描述

**more 命令**是一个基于 vi 编辑器文本过滤器，它以全屏幕的方式按页显示文本文件的内容，支持 vi 中的关键字定位操作。more 名单中内置了若干快捷键，常用的有 H（获得帮助信息），Enter（向下翻滚一行），空格（向下滚动一屏），Q（退出命令）。

该命令一次显示一屏文本，满屏后停下来，并且在屏幕的底部出现一个提示信息，给出至今己显示的该文件的百分比：--More--（XX%）可以用下列不同的方法对提示做出回答：

- 按 Space 键：显示文本的下一屏内容；
- 按 Enter 键：只显示文本的下一行内容；
- 按斜线符 /：接着输入一个模式，可以在文本中寻找下一个相匹配的模式；
- 按 H 键：显示帮助屏，该屏上有相关的帮助信息；
- 按 B 键：显示上一屏内容；
- 按 Q 键：退出 more 命令。

注意：当文件较大时，使用 cat 命令的话，文本在屏幕上迅速闪过（滚屏），用户往往看不清所显示的内容。因此，一般用 more 等命令分屏显示。为了控制滚屏，可以按 Ctrl+S 键，停止滚屏；按 Ctrl+Q 键可以恢复滚屏。按 Ctrl+C（中断）键可以终止该命令的执行，并且返回 Shell 提示符状态。

#### 语法

```
more [OPTION]... [FILE]...
```

##### 选项

```
-NUM：指定每屏显示NUM行；
-d：显示“[press space to continue,'q' to quit.]”和“[Press 'h' for instructions]”；
-c：不进行滚屏操作。每次刷新这个屏幕；
-s：将多个空行压缩成一行显示；
-u：禁止下划线；
+NUM：从NUM行开始显示；
+/STRING：从匹配的查询字符串开始显示。
```

##### 参数

FILE：指定分页显示内容的文件。

#### 实例

1. 显示文件 file 的内容，但在显示之前先清屏，并且在屏幕的最下方显示完核的百分比。

```shell
more -dc file
```

2. 显示文件 file 的内容，每 10 行显示一次，而且在显示之前先清屏。

```shell
more -c -10 file
```
### less 命令

#### 描述

**less 命令**的作用与 more 十分相似，都可以用来浏览文字档案的内容，不同的是 less 命令允许用户向前或向后浏览文件，而 more 命令只能向前浏览。用 less 命令显示文件时，用 PageUp 键向上翻页，用 PageDown 键向下翻页。要退出 less 程序，应按 Q 键。

#### 语法

```
less [OPTION]... [FILE]...
```

##### 选项

```
-e，-E：文件内容显示完毕后，自动退出；
-f，--force：强制显示非一般文件；
-g：不加亮显示搜索到的所有关键词，仅显示当前显示的关键字，以提高显示速度；
-I：搜索时忽略大小写的差异；
-N：每一行行首显示行号；
-s：将连续多个空行压缩成一行显示；
-S：在单行显示较长的内容，而不换行显示；
-xN：将 TAB 字符显示为N个空格字符。
```

##### 参数

文件：指定要分屏显示内容的文件。

### tail 命令

#### 描述

**tail 命令**用于将文件中的尾部内容打印到标准输出。tail 命令默认在屏幕上显示指定文件的末尾 10 行。如果给定的文件不止一个，则在显示的每个文件前面加一个文件名标题。如果没有指定文件或者文件名为“-”，则读取标准输入。

#### 语法

```
tail [OPTION]... [FILE]...
```

##### 选项

```
--retry：即是在tail命令启动时，文件不可访问或者文件稍后变得不可访问，都始终尝试打开文件。使用此选项时需要与选项“——follow=name”连用；
-c, --bytes=K：输出文件尾部的 K（K 为整数）个字节内容。或者使用 -c +K 来从第 K 个字节内容开始显示；
-f, --follow[={name|descriptor}]：显示文件最新追加的内容。“name”表示以文件名的方式监视文件的变化。“-f”与“-fdescriptor”等效；
-F：与选项“-follow=name --retry"功能相同；
-n, --lines=K：输出文件的尾部 K（K 为整数）行内容。K 值后面可以有后缀：b表示512，k表示1024，m表示1 048576(1M)。也开始使用 -n +K 来从第 K 行开始显示；
--pid=PID：与 -f 选项连用，当指定的进程号的进程终止后，自动退出 tail 命令；
-q, --quiet, --silent：当有多个文件参数时，不输出各个文件名；
-s, --sleep-interval=N：与“-f”选项连用，指定监视文件变化时间间隔为N秒；
-v, --verbose：当有多个文件参数时，总是输出各个文件名。
```

##### 参数

FILE：指定要显示尾部内容的文件列表。

#### 实例

```shell
tail file #显示文件file的最后10行
tail +20 file #显示文件file的内容，从第20行至文件末尾
tail -c 10 file #显示文件file的最后10个字符
tail -f app.log #显示日志文件app.log最新追加的内容。用于监控日志十分方便。
```

### head 命令

#### 描述

**head 命令**用于显示文件的开头的内容。在默认情况下，head 命令显示文件的头 10 行的内容。

#### 语法

```
head [OPTION]... [FILE]...
```

##### 选项

```
-n, --lines=[-]K：指定显示头部的 K 行内容。使用 -K 形式时，显示出除了末尾 K 行内容以外的所有内容；
-c, --bytes=[-]K：指定显示头部的 K 个字符。使用 -K 形式时，显示出除了末尾 K 个字节以外的所有内容；
-q, --quiet, --silent：在显示头信息时不显示文件名。
-v, --verbose：总是在显示头信息时显示文件名；
```

##### 参数

FILE：指定显示头部内容的文件列表。