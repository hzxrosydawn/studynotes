### **环境变量概述**

环境变量（environment variables）一般是指在操作系统中用来指定操作系统运行环境的一些参数，如：临时文件夹位置和系统文件夹位置等。

环境变量是在操作系统中一个具有特定名字的对象，它包含了一个或者多个应用程序所将使用到的信息。例如Windows和DOS操作系统中的path环境变量，当要求系统运行一个程序而没有告诉它程序所在的完整路径时，系统除了在当前目录下面寻找此程序外，还应到path中指定的路径去找。如tc或vc++中，set include=path1;path2; 是告诉编译程序到哪里去找.h类型的文件；当然不仅仅是指定什么路径，还有其它的作用的，如set dircmd=/4 设置一个环境变量的作用是在使用dir命令时会把/4作为缺省的参数添加到你的dir命令之后，就像你的每个命令都加了/4参数，它实际上是给命令解释程序command设置的一个环境变量，并且是给dir这个内部命令设置的。

### **软件共用**

很多朋友会在自己的计算机上安装双系统，例如C盘安装Windows XP，D盘安装Windows 7。可是某些软件往往只在Windows XP系统中安装，Windows 7系统中是无法正常使用的，比较麻烦却有效的方法是再安装一遍。当我们了解了环境变量中的用途后就可以很好解决双系统的软件共用问题。为什么在Windows XP中安装了的软件在Windows 7下无法运行呢(绿色软件除外)?原因是安装软件时往往须要向系统目录中复制某些文件，而使用另外一个系统时会由于缺少这些文件而无法运行。因此，我们可以通过设置环境变量的方法来解决这个问题。

### **环境变量设置**
#### **WINDOWS系统**

- %ALLUSERSPROFILE% 局部 返回所有“用户配置文件”的位置。
- %APPDATA% 局部 返回默认情况下应用程序存储数据的位置。
- %CD% 局部 返回当前目录字符串。
- %CMDCMDLINE% 局部 返回用来启动当前的 Cmd.exe 的准确命令行。
- %CMDEXTVERSION% 系统 返回当前的“命令处理程序扩展”的版本号。
- %COMPUTERNAME% 系统 返回计算机的名称。
- %COMSPEC% 系统 返回命令行解释器可执行程序的准确路径。
- %DATE% 系统 返回当前日期。使用与 date /t 命令相同的格式。由 Cmd.exe 生成。有关 date 命令的详细信息，请参阅 Date。
- %ERRORLEVEL% 系统 返回使用过的命令的错误代码。通常用非零值表示错误。
- %HOMEDRIVE% 系统 返回连接到用户主目录的本地工作站驱动器号。基于主目录值的设置。用户主目录是在“本地用户和组”中指定的。
- %HOMEPATH% 系统 返回用户主目录的完整路径。基于主目录值的设置。用户主目录是在“本地用户和组”中指定的。
- %HOMESHARE% 系统 返回用户的共享主目录的网络路径。基于主目录值的设置。用户主目录是在“本地用户和组”中指定的。
- %LOGONSEVER% 局部 返回验证当前登录会话的域控制器的名称。
- %NUMBER\_OF\_PROCESSORS% 系统 指定安装在计算机上的处理器的数目。
- %OS% 系统 返回操作系统的名称。Windows 2000 将操作系统显示为 Windows\_NT。
- %PATH% 系统 指定可执行文件的搜索路径。
- %PATHEXT% 系统 返回操作系统认为可执行的文件扩展名的列表。
- %PROCESSOR\_ARCHITECTURE% 系统 返回处理器的芯片体系结构。值: x86，IA64。
- %PROCESSOR\_IDENTIFIER% 系统 返回处理器说明。
- %PROCESSOR\_LEVEL% 系统 返回计算机上安装的处理器的型号。
- %PROCESSOR\_REVISION% 系统 返回处理器修订号的系统变量。
- %PROMPT% 局部 返回当前解释程序的命令提示符设置。由 Cmd.exe 生成。
- %RANDOM% 系统 返回 0 到 32767 之间的任意十进制数字。由 Cmd.exe 生成。
- %SYSTEMDRIVE% 系统 返回包含 Windows XP 根目录（即系统根目录）的驱动器。
- %SYSTEMROOT% 系统 返回 Windows XP 根目录的位置。
- %TEMP% and %TMP% 系统和用户 返回对当前登录用户可用的应用程序所使用的默认临时目录。有些应用程序需要 TEMP，而其它应用程序则需要 TMP。
- %TIME% 系统 返回当前时间。使用与 time /t 命令相同的格式。由 Cmd.exe 生成。有关 time 命令的详细信息，请参阅 Time。
- %USERDOMAIN% 局部 返回包含用户帐户的域的名称。
- %USERNAME% 局部 返回当前登录的用户的名称。
- %USERPROFILE% 局部 返回当前用户的配置文件的位置。
- %WINDIR% 系统 返回操作系统目录的位置。

##### **设置方法**

在windows操作系统中可以通过我的电脑-系统属性-高级系统设置-环境变量，来设置系统的环境变量，然而在此设置的环境变量是否在注册表中具有对应的项呢？答案是肯定的。而在.net 中提供了一个类来获取系统的环境变量及其值。
环境变量分为两类：用户变量与系统变量，在注册表中都有对应的项。
其中用户变量所在位置：
HKEY_CURRENT_USER\Environment；
系统变量所在位置为：\HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001
\Control\Session Manager\Environment。

另外也可以右击我的电脑——高级系统设置——环境变量——在系统变量里有path选项——双击打开——在原有变量的基础上添加英文状态下的分号——然后将路径名输入即可。（切记，不要删除原先的系统变量，只要用分号隔开，然后添加，最后也要加上分号）

Windows平台以Win10为例：
右键此电脑——属性：

![这里写图片描述](http://img.blog.csdn.net/20161126113507516)

高级系统设置：

![这里写图片描述](http://img.blog.csdn.net/20161126114446907)

环境变量： 

![这里写图片描述](http://img.blog.csdn.net/20161126114517127)

用户变量仅对对应的用户有效，系统变量对所有用户有效，这里选择用户变量。选中Path——编辑：

![env5.png](appendix\env5.png)

如JDK环境变量的添加如下：

![env6.png](appendix\env6.png)

>注意：Windows下不区分大小写，因此windows与WINDOWS都正确；而Linux系统是严格区分大小写的。

##### **编辑方法**

输入set命令可以查看系统当前所存在的所有的环境变量。从环境变量中我们可以得到很多信息。
例如PROCESSOR\_IDENTIFIER显示处理器的架构，USERDOMAIN显示计算机名，USERNAME显示计算机用户名,TEMP显示系统临时文件夹的位置，PROMPT显示当前提示符的状态灯。

![env.png](appendix\env.png)

也可以查看单个的环境的变量，例如输入set windir显示当前的系统文件夹的位置。输入SET P可以查看所有字母以P开头的环境变量的值。

![env2.png](appendix\env2.png)

也可以自定义环境变量，例如我们输入set aa=%temp%，就代表把临时文件夹的值赋值给aa。环境变量在表示的时候需要用%括起来，以便于和普通的字符区分。我们还可以删除环境变量，例如我们输入set aa= 就可以把我们刚才建立的环境变量删除了。

![env3.png](appendix\env3.png)

有关set命令的其他用法请参考set命令帮助：在命令行输入"set /?"回车即可查看set命令帮助

![env4.png](appendix\env4.png)

>注意：在dos窗口中以命令行方式对环境变量的操作只对当前窗口的应用有效。要想永久加入环境变量，就要用图形界面操作。

#### **Linux系统**

shell环境依赖于多个文件的设置。当shell被调用时，它从两个初始文件读取命令。/etc/profile包含了系统变量，它由系统管理员维护，由系统管理员设置本地系统变量和特殊命令。普通用户的启动信息文件($HOME/.bash_project)由各用户自己维护，该文件可以被修改以实现任何特定的系统初始化。

只有在特定的情况下才读取profile文件，确切的说是在用户登陆的时候。当运行shell脚本或subshell以后，就无须再读profile.虽然所有profile都可选的，但是基本上所有系统都有/etc/profile.

如果定义了变量ENV且已经传递到环境中，则所有的bash shell都要读取并调用由这个变量制定的文件所包含的命令。这个文件用来定义所有bash shell的特征，而不仅仅是登陆到shell。这个文件的典型的名字是$HOME/,bashrc。

当用（系统管理员）新建用户时，.bash_profile、bashrc和其他公共的环境文件模板将复制到/etc/skel这个目录下面。可以编辑这些初始化设置，也可以在此目录下添加附加的文件。

Example：
一个典型的系统profile(/etc/profile):
```shell
PATH=$PATH:/usr/qa/tools/bin
ENV==$HOME/.bashrc
ORACLE_HOME=/dbs/oracle
ORACLE_SID=qadb
Export PATH ENV ORACLE_HOME ORCAL_SID
Cat /etc/motd
```
一个典型的用户profile(.bashrc)
```shell
PATH=$PATH:$HOME/bin
TEAM=uvt1224 export TERM
sttyintr \^C
cal
mesg n
```
一个典型的用户 bashrc file (.bashrc):
```shell
alias dir=ls lf='ls -FC'
PSI='$PWS[!]>'
set -o vi
```
别名和其他bash专用的定义应该放在.bashrc文件（不应在.bash_profile) 中定义；否则会导致找不到某些命令。
应该记住profile文件和.bashrc文件的区别：两个profile都只在系统启动时被读取一次，而.bashrc在系统启动和每次调用shell的时候都要被读取。
